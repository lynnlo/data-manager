import{c as V}from"./@babel-4b4a8c5a.js";var G=`
`,v={};v.isFunction=function(i){var t={};return i&&t.toString.call(i)==="[object Function]"};v.isArray=function(i){return Array.isArray(i)};v.isObject=function(i){return i instanceof Object};v.isString=function(i){return typeof i=="string"};v.isNumber=function(i){return typeof i=="number"};v.isBoolean=function(i){return typeof i=="boolean"};v.isDate=function(i){return i instanceof Date};var U=G,z=v,J=function(t,r){if(!t||!z.isArray(t))throw new TypeError('Invalid params "rows" for joinRows. Must be an array of string.');var e=t.join(r||U||`
`);return e},I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},M=function(){function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),t}}();function W(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var E=v,Q=function(){function i(t){W(this,i),this._options=t,this._options.typeHandlers=this._options.typeHandlers||{}}return M(i,[{key:"_setHeaders",value:function(r,e){var n=this;return e?r.map(function(o){return o.item=o.item?e+n._options.headerPathString+o.item:e,o}):r}},{key:"castValue",value:function(r,e,n,o){var s=this._options.typeHandlers;for(var f in s)if(Z(r,f)){r=s[f].call(s,r,n,o);break}return r}},{key:"checkComplex",value:function(r,e){if(E.isDate(r))return[{item:e,value:(this._options.handleDate||this._handleDate)(r,e)}];if(E.isArray(r)){var n=this._handleArray(r,e);return this._setHeaders(n,e)}else if(E.isObject(r)){var o=this._handleObject(r);return this._setHeaders(o,e)}return[{item:e,value:""}]}},{key:"check",value:function(r,e,n,o){switch(r=this.castValue(r,e,n,o),typeof r>"u"?"undefined":I(r)){case"string":return[{item:e,value:this._handleString(r,e)}];case"number":return[{item:e,value:this._handleNumber(r,e)}];case"boolean":return[{item:e,value:this._handleBoolean.bind(this)(r,e)}]}return this.checkComplex(r,e)}},{key:"_handleObject",value:function(r){var e=[];for(var n in r){var o=r[n],s=this.check(o,n,n,r);e=e.concat(s)}return e}},{key:"_handleArray",value:function(r){for(var e=this,n=[],o,s=0;s<r.length;++s){var f=r[s],a=e.check(f,null,s,r);if(a.length!==0){var l=a[0];if(!l.item&&o!==void 0){o.value+=e._options.arrayPathString+l.value;continue}else a.length>0&&!l.item&&o===void 0&&(o=l);n=n.concat(a)}}return n}},{key:"_handleBoolean",value:function(r){var e;return r?e=this._options.booleanTrueString||"true":e=this._options.booleanFalseString||"false",e}},{key:"_handleString",value:function(r){return r}},{key:"_handleNumber",value:function(r){return r}},{key:"_handleDate",value:function(r){return r.toLocaleDateString()}}]),i}(),X=Q,Y=typeof window>"u"?V:window;function Z(i,t){if(i instanceof Y[t])return!0;switch(typeof i>"u"?"undefined":I(i)){case"string":return t==="String";case"boolean":return t==="Boolean";case"number":return t==="Number"}return!1}var R,H;function K(){return H||(H=1,R=function(t,r,e){var n=`
`;if(typeof t!="string")throw new TypeError('Invalid param "textDelimiter", must be a string.');if(typeof r!="string")throw new TypeError('Invalid param "rowDelimiter", must be a string.');var o=new RegExp("\\"+t,"g"),s=t+t,f=t==='"'?function(a){return a.indexOf(r)>=0||a.indexOf(n)>=0||a.indexOf('"')>=0}:function(a){return a.indexOf(r)>=0||a.indexOf(n)>=0};return function(a){return e&&(a=""+a),a.replace&&(a=a.replace(o,s),(e||f(a))&&(a=t+a+t)),a}}),R}var rr=function(){function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),t}}();function er(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var C=J,nr=X,L=v,tr=function(){function i(t){er(this,i),this._options=t||{},this._handler=new nr(this._options),this._headers=this._options.headers||[],this._escape=K()(this._options.textDelimiter,this._options.rowDelimiter,this._options.forceTextDelimiter)}return rr(i,[{key:"parse",value:function(r,e,n){return L.isArray(r)?e(null,this._parseArray(r,n)):L.isObject(r)?e(null,this._parseObject(r)):e(new Error("Unable to parse the JSON object, its not an Array or Object."))}},{key:"_checkRows",value:function(r){var e=null,n=[],o=function(y,g){return y===""||y===void 0?e[g]:y},s=!0,f=!1,a=void 0;try{for(var l=r[Symbol.iterator](),p;!(s=(p=l.next()).done);s=!0){var u=p.value,c=this._headers.length-u.length;c>0&&(u=u.concat(Array(c).join(".").split("."))),e&&this._options.fillGaps&&(u=u.map(o)),n.push(u.join(this._options.rowDelimiter)),e=u}}catch(d){f=!0,a=d}finally{try{!s&&l.return&&l.return()}finally{if(f)throw a}}return n}},{key:"_parseArray",value:function(r,e){var n=this;this._headers=this._headers||[];var o=[],s=void 0,f=function(_){var h=n._headers.indexOf(_);return h===-1&&(n._headers.push(_),h=n._headers.indexOf(_)),h};s=function(_){var h=[],A=function(q){return h.push(q.map(function($){return $??""}))},j=function(){return new Array(n._headers.length).fill(null)},m={},w=j(),O=!0,P=!1,x=void 0;try{for(var S=_[Symbol.iterator](),T;!(O=(T=S.next()).done);O=!0){var k=T.value,b=f(k.item);if(w[b]!=null&&(A(w),w=j()),m[b]=m[b]||0,n._options.fillTopRow&&m[b]<h.length){h[m[b]][b]=n._escape(k.value),m[b]+=1;continue}w[b]=n._escape(k.value),m[b]+=1}}catch(D){P=!0,x=D}finally{try{!O&&S.return&&S.return()}finally{if(P)throw x}}w.length>0&&A(w),o=o.concat(n._checkRows(h))};var a=!0,l=!1,p=void 0;try{for(var u=r[Symbol.iterator](),c;!(a=(c=u.next()).done);a=!0){var d=c.value,y=n._handler.check(d,n._options.mainPathItem,d,r);s(y)}}catch(g){l=!0,p=g}finally{try{!a&&u.return&&u.return()}finally{if(l)throw p}}return!e&&n._options.includeHeaders&&o.unshift(this.headers),C(o,n._options.endOfLine)}},{key:"_parseObject",value:function(r){var e=this,n=[],o=[],s=void 0,f=[[],[]];s=function(u){var c=u.value||u.value===0?u.value.toString():e._options.undefinedString;if(c=e._escape(c),e._options.verticalOutput){var d=[u.item,c];n.push(d.join(e._options.rowDelimiter))}else f[0].push(u.item),f[1].push(c)};for(var a in r){var l="";this._options.mainPathItem&&(l=this._options.mainPathItem+this._options.headerPathString),o=this._handler.check(r[a],l+a,a,r),o.forEach(s)}return this._options.verticalOutput||(n.push(f[0].join(this._options.rowDelimiter)),n.push(f[1].join(this._options.rowDelimiter))),C(n,this._options.endOfLine)}},{key:"headers",get:function(){var r=this,e=this._headers;return this._options.rename&&this._options.rename.length>0&&(e=e.map(function(n){return r._options.rename[r._options.headers.indexOf(n)]||n})),this._options.forceTextDelimiter&&(e=e.map(function(n){return""+r._options.textDelimiter+n+r._options.textDelimiter})),this._options.mapHeaders&&(e=e.map(this._options.mapHeaders)),e.join(this._options.rowDelimiter)}}]),i}(),ir=tr,ar=function(i){throw new Error("jsonexport called without third argument as a callback and is required")},or=ar,N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},B=ir,F=or,sr=G,ur=function(){var i={headers:[],rename:[],headerPathString:".",rowDelimiter:",",textDelimiter:'"',arrayPathString:";",undefinedString:"",endOfLine:sr,mainPathItem:null,booleanTrueString:null,booleanFalseString:null,includeHeaders:!0,fillGaps:!1,verticalOutput:!0,forceTextDelimiter:!1},t=void 0,r=void 0,e=void 0;if(arguments.length===3){var n=Array.prototype.slice.call(arguments);t=n[0],r=n[1],e=n[2]}else if(arguments.length===2){var o=void 0,s=Array.prototype.slice.call(arguments);t=s[0],o=s[1],typeof o=="function"?e=o:(typeof o>"u"?"undefined":N(o))==="object"&&(r=o)}else if(arguments.length===1){var f=Array.prototype.slice.call(arguments),a=f[0];if((typeof a>"u"?"undefined":N(a))==="object"){var l=Object.keys(i),p=Object.keys(a),u=p.every(function(y){return l.includes(y)});p.length>0&&u?r=a:t=a}else t=a}else return new F(new B(i));var c=Object.assign({},i,r),d=new B(c);return t?new Promise(function(y,g){d.parse(t,function(_,h){if(e)return e(_,h);if(_)return g(_);if(g)return y(h)})}):new F};const lr=ur;export{lr as j};
