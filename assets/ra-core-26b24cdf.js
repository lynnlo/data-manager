import{r as s,a as be}from"./react-12317535.js";import{g as oe,s as fr,u as Be,p as Ne,d as Ce,a as un,b as ln,i as dr,m as sn,c as vr}from"./lodash-7ec777e5.js";import{q as vt}from"./query-string-6a1177e4.js";import{u as X,n as Lt,a as he,b as Ve,Q as cn,c as fn}from"./react-query-4d41bbae.js";import{R as dn,u as vn,a as xe,b as le,c as hn,d as we,e as G,N as gn,f as yn}from"./react-router-2eefc5ae.js";import{j as mn}from"./jsonexport-57422552.js";import{i as Fe}from"./inflection-78216119.js";import{E as bn}from"./eventemitter3-0e0e7991.js";import{c as pn,p as wn}from"./history-a3b20500.js";import{r as _n}from"./react-is-147ad7aa.js";import{u as ht,a as En,b as hr,c as Pn,F as On,d as Sn}from"./react-hook-form-22e22630.js";var Cn={id:""},xn={login:function(){return Promise.resolve()},logout:function(){return Promise.resolve()},checkAuth:function(){return Promise.resolve()},checkError:function(){return Promise.resolve()},getPermissions:function(){return Promise.resolve()},getIdentity:function(){return Promise.resolve(Cn)}},gr=s.createContext(xn);gr.displayName="AuthContext";const yr=gr;var We={loginUrl:"/login",afterLoginUrl:"/"},Tn=function(){return s.useContext(yr)};const ee=Tn;var Mn="RaStore",Rn=function(){if(typeof window>"u"||window.localStorage==null)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch{return!1}},Xe=Rn(),Ou=function(e,r){e===void 0&&(e="1"),r===void 0&&(r="");var t="".concat(Mn).concat(r),n=t.length,i={},a=function(c,f){Object.keys(i).forEach(function(o){i[o]&&i[o].key===c&&i[o].callback(f)})},u=function(c){var f;if(((f=c.key)===null||f===void 0?void 0:f.substring(0,n))===t){var o=c.key.substring(n+1),l=c.newValue?Ft(c.newValue):void 0;Object.keys(i).forEach(function(d){i[d]&&i[d].key===o&&(l===null?i[d].callback(void 0):i[d].callback(l??void 0))})}};return{setup:function(){if(Xe){var c=J().getItem("".concat(t,".version"));if(c&&c!==e){var f=J();Object.keys(f).forEach(function(o){o.startsWith(t)&&f.removeItem(o)})}J().setItem("".concat(t,".version"),e),window.addEventListener("storage",u)}},teardown:function(){Xe&&window.removeEventListener("storage",u)},getItem:function(c,f){var o=J().getItem("".concat(t,".").concat(c));return o==null?f:Ft(o)},setItem:function(c,f){f===void 0?J().removeItem("".concat(t,".").concat(c)):J().setItem("".concat(t,".").concat(c),JSON.stringify(f)),a(c,f)},removeItem:function(c){J().removeItem("".concat(t,".").concat(c)),a(c,void 0)},removeItems:function(c){var f=J();Object.keys(f).forEach(function(o){if(o.startsWith("".concat(t,".").concat(c))){f.removeItem(o);var l=o.substring(n+1);a(l,void 0)}})},reset:function(){var c=J();Object.keys(c).forEach(function(f){if(f.startsWith(t)){c.removeItem(f);var o=f.substring(n+1);a(o,void 0)}})},subscribe:function(c,f){var o=Math.random().toString();return i[o]={key:c,callback:f},function(){delete i[o]}}}},Ft=function(e){try{return JSON.parse(e)}catch{return e}},An=function(){function e(){this.valuesMap=new Map}return e.prototype.getItem=function(r){return this.valuesMap.has(r)?String(this.valuesMap.get(r)):null},e.prototype.setItem=function(r,t){this.valuesMap.set(r,t)},e.prototype.removeItem=function(r){this.valuesMap.delete(r)},e.prototype.removeItems=function(r){var t=this;this.valuesMap.forEach(function(n,i){i.startsWith(r)&&t.valuesMap.delete(i)})},e.prototype.clear=function(){this.valuesMap.clear()},e.prototype.key=function(r){if(arguments.length===0)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");var t=Array.from(this.valuesMap.keys());return t[r]},Object.defineProperty(e.prototype,"length",{get:function(){return this.valuesMap.size},enumerable:!1,configurable:!0}),e}(),Ln=new An,J=function(){return Xe?window.localStorage:Ln},mr=function(e){e===void 0&&(e={});var r={},t=function(n,i){Object.keys(r).forEach(function(a){r[a]&&r[a].key===n&&r[a].callback(i)})};return{setup:function(){},teardown:function(){Object.keys(e).forEach(function(n){return delete e[n]})},getItem:function(n,i){return oe(e,n,i)},setItem:function(n,i){fr(e,n,i),t(n,i)},removeItem:function(n){Be(e,n),t(n,void 0)},removeItems:function(n){var i=kt(e);Object.keys(i).forEach(function(a){a.startsWith(n)&&(Be(e,a),t(a,void 0))})},reset:function(){var n=kt(e);Object.keys(n).forEach(function(i){Be(e,i),t(i,void 0)})},subscribe:function(n,i){var a=Math.random().toString();return r[a]={key:n,callback:i},function(){delete r[a]}}}},kt=function(e){var r={};function t(n,i){if(Object(n)!==n)r[i]=n;else if(Array.isArray(n))r[i]=n;else{var a=!0;for(var u in n)a=!1,t(n[u],i?i+"."+u:u);a&&i&&(r[i]={})}}return t(e,""),r},Fn=mr(),br=s.createContext(Fn),kn=function(e){var r=e.value,t=e.children;return s.useEffect(function(){return r.setup(),function(){r.teardown()}},[r]),s.createElement(br.Provider,{value:r},t)},Ue=function(){return s.useContext(br)},jt=function(e,r){return e&&r?String.prototype.replace.call(e,jn,function(t,n){return!r.hasOwnProperty(n)||r[n]==null?t:r[n]}):e},jn=/%\{(.*?)\}/g,In={translate:function(e,r){return r!=null&&r._?jt(r._,r):jt(e,r)},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},gt=s.createContext(In);gt.displayName="I18nContext";var pr=s.createContext(function(){}),wr=s.createContext({notifications:[],addNotification:function(){},takeNotification:function(){},resetNotifications:function(){}}),It=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Dn=function(e){var r=e.children,t=s.useState([]),n=t[0],i=t[1],a=s.useCallback(function(o){i(function(l){return It(It([],l,!0),[o],!1)})},[]),u=s.useCallback(function(){var o=n[0],l=n.slice(1);return i(l),o},[n]),c=s.useCallback(function(){i([])},[]),f=s.useMemo(function(){return{notifications:n,addNotification:a,takeNotification:u,resetNotifications:c}},[n]);return s.createElement(wr.Provider,{value:f},s.createElement(pr.Provider,{value:a},r))},$n=function(){return s.useContext(pr)},Nn=function(){return s.useContext(wr)},Vn=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},z=function(){var e=$n();return s.useCallback(function(r,t){t===void 0&&(t={});var n=t.type,i=n===void 0?"info":n,a=Vn(t,["type"]);e({message:r,type:i,notificationOptions:a})},[e])},Wn=function(e){var r=e.value,t=r===void 0?Un:r,n=e.children,i=se("locale")[0],a=z(),u=s.useState(0),c=u[0],f=u[1],o=s.useState(i===t.getLocale()),l=o[0],d=o[1];return s.useEffect(function(){i&&t.getLocale()!==i?new Promise(function(h){h(t.changeLocale(i))}).then(function(){f(function(h){return h+1}),d(!0)}).catch(function(h){d(!0),a("ra.notification.i18n_error",{type:"error"}),console.error(h)}):d(!0)},[t,i,a]),l?s.createElement(gt.Provider,{value:t,key:c},n):null},Un={translate:function(e){return e},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},yt=function(){return s.useContext(gt)},qn=function(){var e=yt(),r=s.useMemo(function(){return e.getLocale()},[e]);return se("locale",r)},Su=function(){var e=qn()[0];return e},Cu=function(e){var r,t=yt(),n=s.useMemo(function(){return t!=null&&t.getLocales?t==null?void 0:t.getLocales():[]},[t]);return(r=e==null?void 0:e.locales)!==null&&r!==void 0?r:n};function Gn(e){var r=e.basename,t=e.children,n=e.history,i=s.useState({action:n.action,location:n.location}),a=i[0],u=i[1];return s.useLayoutEffect(function(){return n.listen(u)},[n]),s.createElement(dn,{basename:r,children:t,location:a.location,navigationType:a.action,navigator:n})}var _r=s.createContext(""),Qn=function(e){var r=e.children,t=e.basename;return s.createElement(_r.Provider,{value:t},r)},Hn=function(e){var r=e.history,t=e.basename,n=t===void 0?"":t,i=e.children,a=vn(),u=a?Kn:zn;return s.createElement(Qn,{basename:a?n:""},s.createElement(u,{basename:n,history:r},i))},Kn=function(e){var r=e.children;return s.createElement(s.Fragment,null,r)},zn=function(e){var r=e.children,t=e.history,n=s.useMemo(function(){return t||pn()},[t]);return s.createElement(Gn,{history:n},r)},ge=function(){return s.useContext(_r)},Er=function(){var e=ge();return s.useCallback(function(r){var t=r.resource,n=r.id,i=r.type;switch(i){case"list":return K("".concat(e,"/").concat(t));case"create":return K("".concat(e,"/").concat(t,"/create"));case"edit":return n==null?K("".concat(e,"/").concat(t)):K("".concat(e,"/").concat(t,"/").concat(encodeURIComponent(n)));case"show":return n==null?K("".concat(e,"/").concat(t)):K("".concat(e,"/").concat(t,"/").concat(encodeURIComponent(n),"/show"));default:return i}},[e])},K=function(e){return e.replace("//","/")},_e=globalThis&&globalThis.__assign||function(){return _e=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_e.apply(this,arguments)},Te=function(){var e=xe(),r=ge(),t=Er();return s.useCallback(function(n,i,a,u,c){if(i===void 0&&(i=""),c===void 0&&(c={}),n)if(typeof n=="function"){var f=n(i,a,u),o=typeof f=="string"?"".concat(r,"/").concat(f):_e({pathname:"".concat(r,"/").concat(f.pathname)},f);e(typeof o=="string"?wn(o):o,{state:_e({_scrollToTop:!0},c)});return}else if(typeof n=="string"&&n.startsWith("http")&&window){window.location.href=n;return}else{e(t({resource:i,id:a,type:n}),{state:_e({_scrollToTop:!0},c)});return}else return},[e,r,t])},Bn=function(){var e=le();s.useEffect(function(){var r;!((r=e.state)===null||r===void 0)&&r._scrollToTop&&typeof window<"u"&&window.scrollTo(0,0)},[e])},ke=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Jn="GET_LIST",Yn="GET_ONE",Zn="GET_MANY",Xn="GET_MANY_REFERENCE",ea="CREATE",ta="UPDATE",ra="UPDATE_MANY",na="DELETE",aa="DELETE_MANY",ia=["getOne","create","update"],oa=["getList","getMany","getManyReference"],ua=ke(ke([],oa,!0),["updateMany","deleteMany"],!1);var xu=ke(ke([],ia,!0),ua,!0),B=function(){return Promise.resolve()};B.create=function(){return Promise.resolve(null)};B.delete=function(){return Promise.resolve(null)};B.deleteMany=function(){return Promise.resolve(null)};B.getList=function(){return Promise.resolve(null)};B.getMany=function(){return Promise.resolve(null)};B.getManyReference=function(){return Promise.resolve(null)};B.getOne=function(){return Promise.resolve(null)};B.update=function(){return Promise.resolve(null)};B.updateMany=function(){return Promise.resolve(null)};var Dt={create:ea,delete:na,deleteMany:aa,getList:Jn,getMany:Zn,getManyReference:Xn,getOne:Yn,update:ta,updateMany:ra},la=function(e){var r=new Proxy(B,{get:function(t,n){return function(i,a){if(Object.keys(Dt).includes(n.toString())){var u=Dt[n.toString()];return e(u,i,a)}return e(n.toString(),i,a)}},apply:function(t,n,i){return e.apply(e,i)}});return r};const sa=la;var Pr=s.createContext(null);Pr.displayName="DataProviderContext";const Or=Pr,mt=new bn;var Sr={create:function(){return Promise.resolve({data:null})},delete:function(){return Promise.resolve({data:null})},deleteMany:function(){return Promise.resolve({data:[]})},getList:function(){return Promise.resolve({data:[],total:0})},getMany:function(){return Promise.resolve({data:[]})},getManyReference:function(){return Promise.resolve({data:[],total:0})},getOne:function(){return Promise.resolve({data:null})},update:function(){return Promise.resolve({data:null})},updateMany:function(){return Promise.resolve({data:[]})}};var ca=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},fa=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Je,da=function(){var e=ee(),r=Me(),t=z(),n=xe(),i=s.useCallback(function(a,u){return e.checkError(a).then(function(){return!1}).catch(function(c){return ca(void 0,void 0,void 0,function(){var f,o,l,d;return fa(this,function(h){return f=(d=c==null?void 0:c.logoutUser)!==null&&d!==void 0?d:!0,Je?[2,!0]:(Je=setTimeout(function(){Je=void 0},0),o=c&&c.redirectTo!=null?c.redirectTo:a&&a.redirectTo?a.redirectTo:void 0,l=!(u||c&&c.message===!1||a&&a.message===!1||o!=null&&o.startsWith("http")),l&&e.checkAuth({}).then(function(){f?t($t(c,"ra.notification.logged_out"),{type:"error"}):t($t(c,"ra.notification.not_authorized"),{type:"error"})}).catch(function(){}),f?r({},o):o.startsWith("http")?window.location.href=o:n(o),[2,!0])})})})},[e,r,t,n]);return e?i:va},va=function(){return Promise.resolve(!1)},$t=function(e,r){return typeof e=="string"?e:typeof e>"u"||!e.message?r:e.message};const ha=da;var ga=["getList","getMany","getManyReference"],ye=function(){var e=s.useContext(Or)||Sr,r=ha(),t=s.useMemo(function(){return new Proxy(e,{get:function(n,i){if(!(typeof i=="symbol"||i==="then"))return function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var c=i.toString();if(typeof e[c]!="function")throw new Error("Unknown dataProvider function: ".concat(c));try{return e[c].apply(e,a).then(function(f){return f}).catch(function(f){return r(f).then(function(o){if(o)return{data:ga.includes(c)?[]:{}};throw f})})}catch{throw new Error("The dataProvider threw an error. It should return a rejected Promise instead.")}}}})},[e,r]);return t},Tu=function(){var e=X(),r=be.useRef(!1),t=be.useRef(e.isFetching()>0),n=be.useRef(e.isMutating()>0),i=be.useState(t.current||n.current),a=i[0],u=i[1];return be.useEffect(function(){r.current=!0;var c=e.getQueryCache().subscribe(Lt.batchCalls(function(){r.current&&(t.current=e.isFetching()>0,u(t.current||n.current))})),f=e.getMutationCache().subscribe(Lt.batchCalls(function(){r.current&&(n.current=e.isMutating()>0,u(t.current||n.current))}));return function(){r.current=!1,c(),f()}},[e]),a},ya=function(){var e=X();return s.useCallback(function(){e.invalidateQueries()},[e])},ma=function(e,r,t){var n=r.id,i=r.meta,a=ye();return he([e,"getOne",{id:String(n),meta:i}],function(){return a.getOne(e,{id:n,meta:i}).then(function(u){var c=u.data;return c})},t)},de=globalThis&&globalThis.__assign||function(){return de=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},de.apply(this,arguments)},ba=function(e,r,t){r===void 0&&(r={});var n=r.pagination,i=n===void 0?{page:1,perPage:25}:n,a=r.sort,u=a===void 0?{field:"id",order:"DESC"}:a,c=r.filter,f=c===void 0?{}:c,o=r.meta,l=ye(),d=X(),h=he([e,"getList",{pagination:i,sort:u,filter:f,meta:o}],function(){return l.getList(e,{pagination:i,sort:u,filter:f,meta:o}).then(function(p){var S=p.data,_=p.total,m=p.pageInfo;return{data:S,total:_,pageInfo:m}})},de(de({},t),{onSuccess:function(p){var S=p.data;S.forEach(function(_){d.setQueryData([e,"getOne",{id:String(_.id),meta:o}],function(m){return m??_})}),t!=null&&t.onSuccess&&t.onSuccess(p)}}));return s.useMemo(function(){var p,S,_;return h.data?de(de({},h),{data:(p=h.data)===null||p===void 0?void 0:p.data,total:(S=h.data)===null||S===void 0?void 0:S.total,pageInfo:(_=h.data)===null||_===void 0?void 0:_.pageInfo}):h},[h])};function Nt(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}var pa=function(e,r){if(Nt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(r,t[i])||!Nt(e[t[i]],r[t[i]]))return!1;return!0},je=globalThis&&globalThis.__assign||function(){return je=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},je.apply(this,arguments)},wa=function(e){return e&&Object.prototype.toString.call(e)==="[object Object]"},_a=function(e){return e instanceof Date?!1:e===""||e===null||e===void 0||pa(e,{})},Cr=function(e){return Object.keys(e).reduce(function(r,t){var n,i=e[t];return wa(e[t])&&(i=Cr(e[t])),_a(i)?r:je(je({},r),(n={},n[t]=i,n))},{})};const et=Cr;var Vt=function(e,r){return Object.keys(e).reduce(function(t,n){var i;return n!==r?Object.assign({},t,(i={},i[n]=e[n],i)):t},{})},xr=function(e,r){var t,n=r.split(".");if(n.length===1)return Vt(e,r);var i=n[0];if(e[i]===void 0)return e;var a=xr(e[i],n.slice(1).join("."));return Object.keys(a).length===0?Vt(e,i):Object.assign({},e,(t={},t[i]=a,t))};const Ea=xr;var j=globalThis&&globalThis.__assign||function(){return j=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},j.apply(this,arguments)},Tr="SET_SORT",qe="ASC",Wt="DESC",tt="SET_PAGE",Mr="SET_PER_PAGE",rt="SET_FILTER",Rr="SHOW_FILTER",Ar="HIDE_FILTER",Pa=function(e){return e===Wt?qe:Wt},Oa=function(e,r){var t;switch(r.type){case Tr:return r.payload.field===e.sort?j(j({},e),{order:Pa(e.order),page:1}):j(j({},e),{sort:r.payload.field,order:r.payload.order||qe,page:1});case tt:return j(j({},e),{page:r.payload});case Mr:return j(j({},e),{page:1,perPage:r.payload});case rt:return j(j({},e),{page:1,filter:r.payload.filter,displayedFilters:r.payload.displayedFilters?r.payload.displayedFilters:e.displayedFilters});case Rr:return e.displayedFilters&&e.displayedFilters[r.payload.filterName]?e:j(j({},e),{filter:typeof r.payload.defaultValue<"u"?fr(e.filter,r.payload.filterName,r.payload.defaultValue):e.filter,displayedFilters:j(j({},e.displayedFilters),(t={},t[r.payload.filterName]=!0,t))});case Ar:return j(j({},e),{filter:et(Ea(e.filter,r.payload)),displayedFilters:e.displayedFilters?Object.keys(e.displayedFilters).reduce(function(n,i){var a;return i!==r.payload?j(j({},n),(a={},a[i]=!0,a)):n},{}):e.displayedFilters});default:return e}};const Ut=Oa;var qt=globalThis&&globalThis.__assign||function(){return qt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qt.apply(this,arguments)},Mu=function(e,r,t){var n=Object.keys(t),i=r.filter(function(a){return!n.includes(a)});if(i.length>0)throw new Error("<".concat(e,`> component is not properly configured, some essential props are missing.
Be sure to pass the props from the parent. Example:

const My`).concat(e,` = props => (
    <`).concat(e," {...props}></").concat(e,`>
);

The missing props are: `).concat(i.join(", ")))},nt=globalThis&&globalThis.__assign||function(){return nt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nt.apply(this,arguments)},Sa=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Ca=function(e){var r=e.record,t=e.redirect,n=t===void 0?"list":t,i=e.onClick,a=e.mutationOptions,u=a===void 0?{}:a,c=u.meta,f=Sa(u,["meta"]),o=te(e),l=z(),d=Vr(o),h=Te(),p=Wr(),S=p[0],_=p[1].isLoading,m=s.useCallback(function(y){y.stopPropagation(),S(o,{id:r.id,previousData:r,meta:c},nt({onSuccess:function(){l("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:!0}),d([r.id]),h(n,o)},onError:function(g){l(typeof g=="string"?g:g.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof g=="string"?g:g&&g.message?g.message:void 0}})},mutationMode:"undoable"},f)),typeof i=="function"&&i(y)},[S,c,f,l,i,r,h,n,o,d]);return{isLoading:_,handleDelete:m}};const Ru=Ca;var at=globalThis&&globalThis.__assign||function(){return at=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},at.apply(this,arguments)},xa=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Ta=function(e){var r=e.record,t=e.redirect,n=e.mutationMode,i=e.onClick,a=e.mutationOptions,u=a===void 0?{}:a,c=u.meta,f=xa(u,["meta"]),o=te(e),l=s.useState(!1),d=l[0],h=l[1],p=z(),S=Vr(o),_=Te(),m=Wr(),y=m[0],g=m[1].isLoading,w=function(v){h(!0),v.stopPropagation()},P=function(v){h(!1),v.stopPropagation()},b=s.useCallback(function(v){v.stopPropagation(),y(o,{id:r.id,previousData:r,meta:c},at({onSuccess:function(){h(!1),p("ra.notification.deleted",{type:"info",messageArgs:{smart_count:1},undoable:n==="undoable"}),S([r.id]),_(t,o)},onError:function(O){h(!1),p(typeof O=="string"?O:O.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof O=="string"?O:O&&O.message?O.message:void 0}})},mutationMode:n},f)),typeof i=="function"&&i(v)},[y,c,n,f,p,i,r,_,t,o,S]);return{open:d,isLoading:g,handleDialogOpen:w,handleDialogClose:P,handleDelete:b}};const Au=Ta;var Lr=s.createContext(void 0),Fr=function(e){var r=e.children,t=e.value;return s.createElement(Lr.Provider,{value:t},r)},kr=function(e){var r=s.useMemo(function(){return Ne(e,["save","saving","mutationMode","registerMutationMiddleware","unregisterMutationMiddleware"])},[e.save,e.saving,e.mutationMode,e.registerMutationMiddleware,e.unregisterMutationMiddleware]);return r},Ma=function(e){return s.useContext(Lr)},Ae=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},jr=function(){var e=s.useRef([]),r=s.useCallback(function(a){e.current.push(a)},[]),t=s.useCallback(function(a){e.current=e.current.filter(function(u){return u!==a})},[]),n=s.useCallback(function(a){return function(){for(var u,c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var o=e.current.length-1,l=function(){for(var d,h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];return o--,o>=0?(d=e.current)[o].apply(d,Ae(Ae([],h,!1),[l],!1)):a.apply(void 0,h)};return e.current.length>0?(u=e.current)[o].apply(u,Ae(Ae([],c,!1),[l],!1)):a.apply(void 0,c)}},[]),i=s.useMemo(function(){return{registerMutationMiddleware:r,getMutateWithMiddlewares:n,unregisterMutationMiddleware:t}},[r,n,t]);return i},Ra=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},Aa=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},La=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Fa=function(e){var r;e===void 0&&(e={});var t=e.disableAuthentication,n=e.record,i=e.redirect,a=e.transform,u=e.mutationOptions,c=u===void 0?{}:u;He({enabled:!t});var f=te(e),o=Jr(e),l=o.hasEdit,d=o.hasShow,h=i??ja(d,l),p=le(),S=re(),_=z(),m=Te(),y=(r=n??ka(p))!==null&&r!==void 0?r:void 0,g=c.onSuccess,w=c.onError,P=c.meta,b=La(c,["onSuccess","onError","meta"]),v=jr(),O=v.registerMutationMiddleware,E=v.getMutateWithMiddlewares,T=v.unregisterMutationMiddleware,C=pi(f,void 0,b),x=C[0],R=C[1].isLoading,L=s.useCallback(function(I,D){var W=D===void 0?{}:D,U=W.onSuccess,F=W.onError,N=W.transform;return Promise.resolve(N?N(I):a?a(I):I).then(function($){var ce=E(x);ce(f,{data:$,meta:P},{onSuccess:function(V,me,Re){return Ra(void 0,void 0,void 0,function(){return Aa(this,function(St){return U?[2,U(V,me,Re)]:g?[2,g(V,me,Re)]:(_("ra.notification.created",{type:"info",messageArgs:{smart_count:1}}),m(h,f,V.id,V),[2])})})},onError:F||w||function(V){_(typeof V=="string"?V:V.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof V=="string"?V:V&&V.message?V.message:void 0}})}})})},[x,h,E,P,_,w,g,m,f,a]),M=Ot(),A=S("ra.page.create",{name:M(f,1)});return{isFetching:!1,isLoading:!1,saving:R,defaultTitle:A,save:L,resource:f,record:y,redirect:h,registerMutationMiddleware:O,unregisterMutationMiddleware:T}},ka=function(e){var r=e.state,t=e.search;if(r&&r.record)return r.record;if(t)try{var n=vt.parse(t);if(n.source){if(Array.isArray(n.source)){console.error("Failed to parse location search parameter '".concat(t,`'. To pre-fill some fields in the Create form, pass a stringified source parameter (e.g. '?source={"title":"foo"}')`));return}return JSON.parse(n.source)}}catch{console.error("Failed to parse location search parameter '".concat(t,`'. To pre-fill some fields in the Create form, pass a stringified source parameter (e.g. '?source={"title":"foo"}')`))}return null},ja=function(e,r){return r?"edit":e?"show":"list"},bt=s.createContext(void 0);bt.displayName="RecordContext";var pt=function(e){var r=e.children,t=e.value;return s.createElement(bt.Provider,{value:t},r)},wt=s.createContext({record:null,defaultTitle:null,isFetching:null,isLoading:null,redirect:null,resource:null,save:null,saving:null,registerMutationMiddleware:null,unregisterMutationMiddleware:null});wt.displayName="CreateContext";var Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ie.apply(this,arguments)},Ia=function(e){var r=e.children,t=e.value;return s.createElement(wt.Provider,{value:t},s.createElement(Fr,{value:Ie(Ie({},kr(t)),{mutationMode:"pessimistic"})},s.createElement(pt,{value:t&&t.record},r)))},Da=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Lu=function(e){var r=e.children,t=Da(e,["children"]),n=Fa(t),i=s.createElement(Ia,{value:n},r);return t.resource?s.createElement(Qe,{value:t.resource},i):i},Fu=function(e){var r=s.useContext(wt);return s.useMemo(function(){return Ce({},e!=null?$a(e):{},r)},[r,e])},$a=function(e){var r=e.record,t=e.defaultTitle,n=e.isFetching,i=e.isLoading,a=e.redirect,u=e.resource,c=e.save,f=e.saving;return{record:r,defaultTitle:t,isFetching:n,isLoading:i,redirect:a,resource:u,save:c,saving:f}},Ee=globalThis&&globalThis.__assign||function(){return Ee=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ee.apply(this,arguments)},Na=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},Va=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Gt=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Wa=function(e){e===void 0&&(e={});var r=e.disableAuthentication,t=e.id,n=e.mutationMode,i=n===void 0?"undoable":n,a=e.mutationOptions,u=a===void 0?{}:a,c=e.queryOptions,f=c===void 0?{}:c,o=e.redirect,l=o===void 0?Ua:o,d=e.transform;He({enabled:!r});var h=te(e),p=ji(h),S=re(),_=z(),m=Te(),y=ya(),g=hn().id,w=t??decodeURIComponent(g),P=f.meta,b=Gt(f,["meta"]),v=u.onSuccess,O=u.onError,E=u.meta,T=Gt(u,["onSuccess","onError","meta"]),C=jr(),x=C.registerMutationMiddleware,R=C.getMutateWithMiddlewares,L=C.unregisterMutationMiddleware,M=ma(h,{id:w,meta:P},Ee({onError:function(){_("ra.notification.item_doesnt_exist",{type:"error"}),m("list",h),y()},refetchOnReconnect:!1,refetchOnWindowFocus:!1,retry:!1},b)),A=M.data,I=M.error,D=M.isLoading,W=M.isFetching,U=M.refetch;if(A&&A.id&&A.id!=w)throw new Error("useEditController: Fetched record's id attribute (".concat(A.id,") must match the requested 'id' (").concat(w,")"));var F=Ot(),N=p(A),$=S("ra.page.edit",{name:F(h,1),id:w,record:A,recordRepresentation:typeof N=="string"?N:""}),ce={id:w,previousData:A},V=_i(h,ce,Ee(Ee({},T),{mutationMode:i})),me=V[0],Re=V[1].isLoading,St=s.useCallback(function(Ke,Ct){var ze=Ct===void 0?{}:Ct,xt=ze.onSuccess,Tt=ze.onError,Mt=ze.transform;return Promise.resolve(Mt?Mt(Ke,{previousData:ce.previousData}):d?d(Ke,{previousData:ce.previousData}):Ke).then(function(an){var on=R(me);return on(h,{id:w,data:an,meta:E},{onSuccess:function(q,Rt,At){return Na(void 0,void 0,void 0,function(){return Va(this,function(du){return xt?[2,xt(q,Rt,At)]:v?[2,v(q,Rt,At)]:(_("ra.notification.updated",{type:"info",messageArgs:{smart_count:1},undoable:i==="undoable"}),m(l,h,q.id,q),[2])})})},onError:Tt||O||function(q){_(typeof q=="string"?q:q.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof q=="string"?q:q&&q.message?q.message:void 0}})}})})},[w,R,E,i,_,O,v,m,l,h,d,me,ce.previousData]);return{defaultTitle:$,error:I,isFetching:W,isLoading:D,mutationMode:i,record:A,redirect:l,refetch:U,registerMutationMiddleware:x,resource:h,save:St,saving:Re,unregisterMutationMiddleware:L}},Ua="list",Ge=function(e){var r=s.useContext(bt);return e&&e.record||r},qa=function(e){var r=e.value,t=e.children;return r?s.createElement(pt,{value:r},t):t},_t=s.createContext({record:null,defaultTitle:null,isFetching:null,isLoading:null,mutationMode:null,redirect:null,refetch:null,resource:null,save:null,saving:null,registerMutationMiddleware:null,unregisterMutationMiddleware:null});_t.displayName="EditContext";var Ga=function(e){var r=e.children,t=e.value;return s.createElement(_t.Provider,{value:t},s.createElement(Fr,{value:kr(t)},s.createElement(pt,{value:t&&t.record},r)))},Qa=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},ku=function(e){var r=e.children,t=Qa(e,["children"]),n=Wa(t),i=s.createElement(Ga,{value:n},r);return t.resource?s.createElement(Qe,{value:t.resource},i):i},ju=function(e){var r=s.useContext(_t);return s.useMemo(function(){return Ce({},e!=null?Ha(e):{},r)},[r,e])},Ha=function(e){var r=e.data,t=e.record,n=e.defaultTitle,i=e.isFetching,a=e.isLoading,u=e.mutationMode,c=e.redirect,f=e.resource,o=e.save,l=e.saving;return{data:t||r,record:t||r,defaultTitle:n,isFetching:i,isLoading:a,mutationMode:u,redirect:c,resource:f,save:o,saving:l}};const Ka=function(e,r){var t=document.createElement("a");t.style.display="none",document.body.appendChild(t);var n=new Blob([e],{type:"text/csv;charset=utf-8"});window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(n,"".concat(r,".csv")):(t.setAttribute("href",URL.createObjectURL(n)),t.setAttribute("download","".concat(r,".csv")),t.click())};var za=function(e,r,t,n){return mn(e,function(i,a){return Ka(a,n)})};const Ba=za;var Ja=function(e){return function(r,t,n){return e.getMany(n,{ids:Ya(r,t)}).then(function(i){var a=i.data;return a.reduce(function(u,c){return u[c.id]=c,u},{})})}},Ya=function(e,r){return Array.from(new Set(e.filter(function(t){return t[r]!=null}).map(function(t){return t[r]}).reduce(function(t,n){return t.concat(n)},[])))};const Iu=Ja;var fe=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Ir=function(e){var r="".concat(e,".selectedIds"),t=se(r,Za),n=t[0],i=t[1],a=Ki(r),u=s.useMemo(function(){return{select:function(c){c&&i(fe([],c,!0))},unselect:function(c){!c||c.length===0||i(function(f){return Array.isArray(f)?f.filter(function(o){return!c.includes(o)}):[]})},toggle:function(c){typeof c>"u"||i(function(f){if(!Array.isArray(f))return fe([],f,!0);var o=f.indexOf(c);return o>-1?fe(fe([],f.slice(0,o),!0),f.slice(o+1),!0):fe(fe([],f,!0),[c],!1)})},clearSelection:function(){a()}}},[i,a]);return[n,u]},Za=[];function Dr(e){var r=s.useState(e),t=r[0],n=r[1],i=s.useRef(!1);s.useEffect(function(){return i.current=!0,function(){i.current=!1}},[]);var a=s.useCallback(function(u){if(i.current)return n(u)},[i,n]);return[t,a]}function Xa(e,r){e===void 0&&(e=0),r===void 0&&(r="");var t=Dr(!1),n=t[0],i=t[1];return s.useEffect(function(){i(!1);var a=setTimeout(function(){i(!0)},e);return function(){clearTimeout(a)}},[r,e,i]),n}function ei(){var e=s.useRef(!0);return s.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e}var Z=globalThis&&globalThis.__assign||function(){return Z=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Z.apply(this,arguments)},Qt=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},ti=function(e){var r=e.debounce,t=r===void 0?500:r,n=e.disableSyncWithLocation,i=n===void 0?!1:n,a=e.filterDefaultValues,u=e.perPage,c=u===void 0?10:u,f=e.resource,o=e.sort,l=o===void 0?oi:o,d=e.storeKey,h=d===void 0?"".concat(f,".listParams"):d,p=le(),S=xe(),_=s.useState(Bt),m=_[0],y=_[1],g=se(h,Bt),w=g[0],P=g[1],b=s.useRef(),v=ei(),O=[p.search,f,h,JSON.stringify(i?m:w),JSON.stringify(a),JSON.stringify(l),c,i],E=i?{}:ni(p),T=s.useMemo(function(){return ii({queryFromLocation:E,params:i?m:w,filterDefaultValues:a,sort:l,perPage:c})},O);s.useEffect(function(){Object.keys(E).length>0&&P(T)},[p.search]);var C=s.useCallback(function(F){v.current&&(b.current?b.current=Ut(b.current,F):(b.current=Ut(T,F),setTimeout(function(){i?y(b.current):S({search:"?".concat(vt.stringify(Z(Z({},b.current),{filter:JSON.stringify(b.current.filter),displayedFilters:JSON.stringify(b.current.displayedFilters)})))},{state:{_scrollToTop:F.type===tt}}),b.current=void 0},0)))},Qt(Qt([],O,!0),[S],!1)),x=s.useCallback(function(F){return C({type:Tr,payload:F})},[C]),R=s.useCallback(function(F){return C({type:tt,payload:F})},[C]),L=s.useCallback(function(F){return C({type:Mr,payload:F})},[C]),M=T.filter||zt,A=T.displayedFilters||zt,I=un(function(F,N){C({type:rt,payload:{filter:et(F),displayedFilters:N}})},t),D=s.useCallback(function(F,N,$){return $===void 0&&($=!0),$?I(F,N):C({type:rt,payload:{filter:et(F),displayedFilters:N}})},[C]),W=s.useCallback(function(F){C({type:Ar,payload:F})},[C]),U=s.useCallback(function(F,N){C({type:Rr,payload:{filterName:F,defaultValue:N}})},[C]);return[Z({displayedFilters:A,filterValues:M,requestSignature:O},T),{changeParams:C,setPage:R,setPerPage:L,setSort:x,setFilters:D,hideFilter:W,showFilter:U}]},ri=["page","perPage","sort","order","filter","displayedFilters"],Ht=function(e,r){if(e[r]&&typeof e[r]=="string")try{e[r]=JSON.parse(e[r])}catch{delete e[r]}},ni=function(e){var r=e.search,t=ln(vt.parse(r),function(n,i){return ri.indexOf(i)!==-1});return Ht(t,"filter"),Ht(t,"displayedFilters"),t},ai=function(e){return e&&e.filter&&(Object.keys(e.filter).length>0||e.order!=null||e.page!==1||e.perPage!=null||e.sort!=null)},ii=function(e){var r=e.queryFromLocation,t=e.params,n=e.filterDefaultValues,i=e.sort,a=e.perPage,u=Object.keys(r).length>0?r:ai(t)?Z({},t):{filter:n||{}};return u.sort||(u.sort=i.field,u.order=i.order),u.perPage==null&&(u.perPage=a),u.page==null&&(u.page=1),Z(Z({},u),{page:Kt(u.page,1),perPage:Kt(u.perPage,10)})},Kt=function(e,r){var t=typeof e=="string"?parseInt(e,10):e;return isNaN(t)?r:t},zt={},oi={field:"id",order:qe},Bt={},ue=globalThis&&globalThis.__assign||function(){return ue=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ue.apply(this,arguments)},ui=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},li=function(e){e===void 0&&(e={});var r=e.debounce,t=r===void 0?500:r,n=e.disableAuthentication,i=e.disableSyncWithLocation,a=e.exporter,u=a===void 0?Ba:a,c=e.filter,f=e.filterDefaultValues,o=e.perPage,l=o===void 0?10:o,d=e.queryOptions,h=d===void 0?{}:d,p=e.sort,S=p===void 0?si:p,_=e.storeKey;He({enabled:!n});var m=te(e),y=h.meta,g=ui(h,["meta"]);if(!m)throw new Error("<List> was called outside of a ResourceContext and without a resource prop. You must set the resource prop.");if(c&&s.isValidElement(c))throw new Error("<List> received a React element as `filter` props. If you intended to set the list filter elements, use the `filters` (with an s) prop instead. The `filter` prop is internal and should not be set by the developer.");var w=re(),P=z(),b=ti({debounce:t,disableSyncWithLocation:i,filterDefaultValues:f,perPage:l,resource:m,sort:S,storeKey:_}),v=b[0],O=b[1],E=Ir(m),T=E[0],C=E[1],x=ba(m,{pagination:{page:v.page,perPage:v.perPage},sort:{field:v.sort,order:v.order},filter:ue(ue({},v.filter),c),meta:y},ue({keepPreviousData:!0,retry:!1,onError:function($){return P(($==null?void 0:$.message)||"ra.notification.http_error",{type:"error",messageArgs:{_:$==null?void 0:$.message}})}},g)),R=x.data,L=x.pageInfo,M=x.total,A=x.error,I=x.isLoading,D=x.isFetching,W=x.refetch;s.useEffect(function(){if(v.page<=0||!D&&v.page>1&&(R==null||(R==null?void 0:R.length)===0)){O.setPage(1);return}if(M!=null){var $=Math.ceil(M/v.perPage)||1;!D&&v.page>$&&O.setPage($)}},[D,v.page,v.perPage,R,O,M]);var U=s.useMemo(function(){return{field:v.sort,order:v.order}},[v.sort,v.order]),F=Ot(),N=w("ra.page.list",{name:F(m,2)});return{sort:U,data:R,defaultTitle:N,displayedFilters:v.displayedFilters,error:A,exporter:u,filter:c,filterValues:v.filterValues,hideFilter:O.hideFilter,isFetching:D,isLoading:I,onSelect:C.select,onToggleItem:C.toggle,onUnselectItems:C.clearSelection,page:v.page,perPage:v.perPage,refetch:W,resource:m,selectedIds:T,setFilters:O.setFilters,setPage:O.setPage,setPerPage:O.setPerPage,setSort:O.setSort,showFilter:O.showFilter,total:M,hasNextPage:L?L.hasNextPage:M!=null?v.page*v.perPage<M:void 0,hasPreviousPage:L?L.hasPreviousPage:v.page>1}},si={field:"id",order:qe},ci=["sort","data","defaultTitle","displayedFilters","error","exporter","filterValues","hideFilter","isFetching","isLoading","onSelect","onToggleItem","onUnselectItems","page","perPage","refetch","refresh","resource","selectedIds","setFilters","setPage","setPerPage","setSort","showFilter","total","totalPages"],Du=function(e){return Object.keys(e).filter(function(r){return!ci.includes(r)}).reduce(function(r,t){var n;return ue(ue({},r),(n={},n[t]=e[t],n))},{})},Et=s.createContext({sort:null,data:null,defaultTitle:null,displayedFilters:null,exporter:null,filterValues:null,hasNextPage:null,hasPreviousPage:null,hideFilter:null,isFetching:null,isLoading:null,onSelect:null,onToggleItem:null,onUnselectItems:null,page:null,perPage:null,refetch:null,resource:null,selectedIds:void 0,setFilters:null,setPage:null,setPerPage:null,setSort:null,showFilter:null,total:null});Et.displayName="ListContext";var $r=s.createContext({displayedFilters:null,filterValues:null,hideFilter:null,setFilters:null,showFilter:null,resource:null}),fi=function(e){return s.useMemo(function(){return Ne(e,["displayedFilters","filterValues","hideFilter","setFilters","showFilter","resource"])},[e.displayedFilters,e.filterValues,e.hideFilter,e.setFilters,e.showFilter])};$r.displayName="ListFilterContext";var Nr=s.createContext({sort:null,setSort:null,resource:null}),di=function(e){return s.useMemo(function(){return Ne(e,["sort","setSort","resource"])},[e.sort,e.setSort])};Nr.displayName="ListSortContext";var Pt=s.createContext({isLoading:null,page:null,perPage:null,setPage:null,setPerPage:null,hasPreviousPage:null,hasNextPage:null,total:void 0,resource:null});Pt.displayName="ListPaginationContext";var vi=function(e){return s.useMemo(function(){return Ne(e,["isLoading","hasPreviousPage","hasNextPage","page","perPage","setPage","setPerPage","total","resource"])},[e.isLoading,e.hasPreviousPage,e.hasNextPage,e.page,e.perPage,e.setPage,e.setPerPage,e.total])},hi=function(e){var r=e.value,t=e.children;return s.createElement(Et.Provider,{value:r},s.createElement($r.Provider,{value:fi(r)},s.createElement(Nr.Provider,{value:di(r)},s.createElement(Pt.Provider,{value:vi(r)},t))))},gi=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},$u=function(e){var r=e.children,t=gi(e,["children"]);return s.createElement(Qe,{value:t.resource},s.createElement(hi,{value:li(t)},r))},Nu=function(e){var r=s.useContext(Et);return s.useMemo(function(){return Ce({},e!=null?yi(e):{},r)},[r,e])},yi=function(e){var r=e.sort,t=e.data,n=e.defaultTitle,i=e.displayedFilters,a=e.exporter,u=e.filterValues,c=e.hasCreate,f=e.hideFilter,o=e.isFetching,l=e.isLoading,d=e.onSelect,h=e.onToggleItem,p=e.onUnselectItems,S=e.page,_=e.perPage,m=e.refetch,y=e.resource,g=e.selectedIds,w=e.setFilters,P=e.setPage,b=e.setPerPage,v=e.setSort,O=e.showFilter,E=e.total;return{sort:r,data:t,defaultTitle:n,displayedFilters:i,exporter:a,filterValues:u,hasCreate:c,hideFilter:f,isFetching:o,isLoading:l,onSelect:d,onToggleItem:h,onUnselectItems:p,page:S,perPage:_,refetch:m,resource:y,selectedIds:g,setFilters:w,setPage:P,setPerPage:b,setSort:v,showFilter:O,total:E}},Vu=function(e){var r=s.useContext(Pt);return s.useMemo(function(){return Ce({},e!=null?mi(e):{},r)},[r,e])},mi=function(e){var r=e.isLoading,t=e.page,n=e.perPage,i=e.setPage,a=e.setPerPage,u=e.hasPreviousPage,c=e.hasNextPage,f=e.total,o=e.resource;return{isLoading:r,page:t,perPage:n,setPage:i,setPerPage:a,hasPreviousPage:u,hasNextPage:c,total:f,resource:o}},Vr=function(e){var r=Ir(e),t=r[1].unselect;return s.useCallback(function(n){t(n)},[t])},Le=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Wu=function(e,r,t){t===void 0&&(t=!1);var n=se("".concat(e,".datagrid.expanded"),[]),i=n[0],a=n[1],u=Array.isArray(i)?i.map(function(f){return f==r}).indexOf(!0)!==-1:!1,c=s.useCallback(function(){a(function(f){if(!Array.isArray(f))return[r];var o=f.findIndex(function(l){return l==r});return o>-1?t?[]:Le(Le([],f.slice(0,o),!0),f.slice(o+1),!0):t?[r]:Le(Le([],f,!0),[r],!1)})},[a,r,t]);return[u,c]},Uu=function(e,r){var t=se("".concat(e,".datagrid.expanded"),[]),n=t[0],i=t[1],a=Array.isArray(n)?n.some(function(c){return r.some(function(f){return f==c})}):!1,u=s.useCallback(function(){var c=n.filter(function(f){return!r.some(function(o){return o==f})});i(a?c:c.concat(r))},[n,i,a,r]);return[a,u]},ve=globalThis&&globalThis.__assign||function(){return ve=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ve.apply(this,arguments)},bi=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},pi=function(e,r,t){r===void 0&&(r={}),t===void 0&&(t={});var n=ye(),i=X(),a=s.useRef(r),u=Ve(function(f){var o=f===void 0?{}:f,l=o.resource,d=l===void 0?e:l,h=o.data,p=h===void 0?a.current.data:h,S=o.meta,_=S===void 0?a.current.meta:S;return n.create(d,{data:p,meta:_}).then(function(m){var y=m.data;return y})},ve(ve({},t),{onSuccess:function(f,o,l){o===void 0&&(o={});var d=o.resource,h=d===void 0?e:d;i.setQueryData([h,"getOne",{id:String(f.id)}],f),t.onSuccess&&t.onSuccess(f,o,l)}})),c=function(f,o,l){f===void 0&&(f=e),o===void 0&&(o={}),l===void 0&&(l={});var d=l.returnPromise,h=bi(l,["returnPromise"]);if(d)return u.mutateAsync(ve({resource:f},o),l);u.mutate(ve({resource:f},o),h)};return[c,u]},k=globalThis&&globalThis.__assign||function(){return k=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},k.apply(this,arguments)},Jt=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},Yt=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},wi=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Ye=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},_i=function(e,r,t){r===void 0&&(r={}),t===void 0&&(t={});var n=ye(),i=X(),a=r.id,u=r.data,c=r.meta,f=t.mutationMode,o=f===void 0?"pessimistic":f,l=wi(t,["mutationMode"]),d=s.useRef(o),h=s.useRef(r),p=s.useRef([]),S=function(y){var g=y.resource,w=y.id,P=y.data,b=Date.now(),v=d.current==="undoable"?b+5*1e3:b,O=function(E){if(E){var T=E.findIndex(function(C){return C.id==w});return T===-1?E:Ye(Ye(Ye([],E.slice(0,T),!0),[k(k({},E[T]),P)],!1),E.slice(T+1),!0)}};i.setQueryData([g,"getOne",{id:String(w),meta:c}],function(E){return k(k({},E),P)},{updatedAt:v}),i.setQueriesData([g,"getList"],function(E){return E&&E.data?k(k({},E),{data:O(E.data)}):E},{updatedAt:v}),i.setQueriesData([g,"getMany"],function(E){return E&&E.length>0?O(E):E},{updatedAt:v}),i.setQueriesData([g,"getManyReference"],function(E){return E&&E.data?{data:O(E.data),total:E.total}:E},{updatedAt:v})},_=Ve(function(y){var g=y===void 0?{}:y,w=g.resource,P=w===void 0?e:w,b=g.id,v=b===void 0?h.current.id:b,O=g.data,E=O===void 0?h.current.data:O,T=g.meta,C=T===void 0?h.current.meta:T,x=g.previousData,R=x===void 0?h.current.previousData:x;return n.update(P,{id:v,data:E,previousData:R,meta:C}).then(function(L){var M=L.data;return M})},k(k({},l),{onMutate:function(y){return Jt(void 0,void 0,void 0,function(){var g;return Yt(this,function(w){switch(w.label){case 0:return l.onMutate?[4,l.onMutate(y)]:[3,2];case 1:return g=w.sent()||{},[2,k({snapshot:p.current},g)];case 2:return[2,{snapshot:p.current}]}})})},onError:function(y,g,w){if(g===void 0&&(g={}),(d.current==="optimistic"||d.current==="undoable")&&w.snapshot.forEach(function(P){var b=P[0],v=P[1];i.setQueryData(b,v)}),l.onError)return l.onError(y,g,w)},onSuccess:function(y,g,w){if(g===void 0&&(g={}),d.current==="pessimistic"){var P=g.resource,b=P===void 0?e:P,v=g.id,O=v===void 0?a:v;S({resource:b,id:O,data:y}),l.onSuccess&&l.onSuccess(y,g,w)}},onSettled:function(y,g,w,P){if(w===void 0&&(w={}),(d.current==="optimistic"||d.current==="undoable")&&P.snapshot.forEach(function(b){var v=b[0];i.invalidateQueries(v)}),l.onSettled)return l.onSettled(y,g,w,P)}})),m=function(y,g,w){return y===void 0&&(y=e),g===void 0&&(g={}),w===void 0&&(w={}),Jt(void 0,void 0,void 0,function(){var P,b,v,O,E,T,C,x,R,L,M,A,I;return Yt(this,function(D){switch(D.label){case 0:return P=w.mutationMode,b=w.returnPromise,v=w.onSuccess,O=w.onSettled,E=w.onError,h.current=r,P&&(d.current=P),b&&d.current!=="pessimistic"&&console.warn("The returnPromise parameter can only be used if the mutationMode is set to pessimistic"),d.current==="pessimistic"?b?[2,_.mutateAsync(k({resource:y},g),{onSuccess:v,onSettled:O,onError:E})]:[2,_.mutate(k({resource:y},g),{onSuccess:v,onSettled:O,onError:E})]:(T=g.id,C=T===void 0?a:T,x=g.data,R=x===void 0?u:x,L=g.meta,M=L===void 0?c:L,A=i.getQueryData([y,"getOne",{id:String(C),meta:M}]),I=[[y,"getOne",{id:String(C),meta:M}],[y,"getList"],[y,"getMany"],[y,"getManyReference"]],p.current=I.reduce(function(W,U){return W.concat(i.getQueriesData(U))},[]),[4,Promise.all(p.current.map(function(W){var U=W[0];return i.cancelQueries(U)}))]);case 1:return D.sent(),S({resource:y,id:C,data:R}),v&&setTimeout(function(){return v(k(k({},A),R),k({resource:y},g),{snapshot:p.current})},0),l.onSuccess&&setTimeout(function(){return l.onSuccess(k(k({},A),R),k({resource:y},g),{snapshot:p.current})},0),d.current==="optimistic"?[2,_.mutate(k({resource:y},g),{onSettled:O,onError:E})]:(mt.once("end",function(W){var U=W.isUndo;U?p.current.forEach(function(F){var N=F[0],$=F[1];i.setQueryData(N,$)}):_.mutate(k({resource:y},g),{onSettled:O,onError:E})}),[2])}})})};return[m,_]},Q=globalThis&&globalThis.__assign||function(){return Q=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Q.apply(this,arguments)},Zt=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},Xt=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Ei=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},er=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Wr=function(e,r,t){r===void 0&&(r={}),t===void 0&&(t={});var n=ye(),i=X(),a=r.id,u=r.previousData,c=t.mutationMode,f=c===void 0?"pessimistic":c,o=Ei(t,["mutationMode"]),l=s.useRef(f),d=s.useRef(r),h=s.useRef([]),p=function(m){var y=m.resource,g=m.id,w=Date.now(),P=l.current==="undoable"?w+5*1e3:w,b=function(v){if(v){var O=v.findIndex(function(E){return E.id==g});return O===-1?v:er(er([],v.slice(0,O),!0),v.slice(O+1),!0)}};i.setQueriesData([y,"getList"],function(v){if(!v||!v.data)return v;var O=b(v.data),E=O.length<v.data.length;return E?{data:O,total:v.total?v.total-1:void 0,pageInfo:v.pageInfo}:v},{updatedAt:P}),i.setQueriesData([y,"getMany"],function(v){return v&&v.length>0?b(v):v},{updatedAt:P}),i.setQueriesData([y,"getManyReference"],function(v){if(!v||!v.data)return v;var O=b(v.data),E=O.length<v.data.length;return E?{data:O,total:v.total-1}:v},{updatedAt:P})},S=Ve(function(m){var y=m===void 0?{}:m,g=y.resource,w=g===void 0?e:g,P=y.id,b=P===void 0?d.current.id:P,v=y.previousData,O=v===void 0?d.current.previousData:v,E=y.meta,T=E===void 0?d.current.meta:E;return n.delete(w,{id:b,previousData:O,meta:T}).then(function(C){var x=C.data;return x})},Q(Q({},o),{onMutate:function(m){return Zt(void 0,void 0,void 0,function(){var y;return Xt(this,function(g){switch(g.label){case 0:return o.onMutate?[4,o.onMutate(m)]:[3,2];case 1:return y=g.sent()||{},[2,Q({snapshot:h.current},y)];case 2:return[2,{snapshot:h.current}]}})})},onError:function(m,y,g){if(y===void 0&&(y={}),(l.current==="optimistic"||l.current==="undoable")&&g.snapshot.forEach(function(w){var P=w[0],b=w[1];i.setQueryData(P,b)}),o.onError)return o.onError(m,y,g)},onSuccess:function(m,y,g){if(y===void 0&&(y={}),l.current==="pessimistic"){var w=y.resource,P=w===void 0?e:w,b=y.id,v=b===void 0?a:b;p({resource:P,id:v}),o.onSuccess&&o.onSuccess(m,y,g)}},onSettled:function(m,y,g,w){if(g===void 0&&(g={}),(l.current==="optimistic"||l.current==="undoable")&&w.snapshot.forEach(function(P){var b=P[0];i.invalidateQueries(b)}),o.onSettled)return o.onSettled(m,y,g,w)}})),_=function(m,y,g){return m===void 0&&(m=e),y===void 0&&(y={}),g===void 0&&(g={}),Zt(void 0,void 0,void 0,function(){var w,P,b,v,O,E,T,C,x;return Xt(this,function(R){switch(R.label){case 0:return w=g.mutationMode,P=g.onSuccess,b=g.onSettled,v=g.onError,d.current=r,w&&(l.current=w),l.current==="pessimistic"?[2,S.mutate(Q({resource:m},y),{onSuccess:P,onSettled:b,onError:v})]:(O=y.id,E=O===void 0?a:O,T=y.previousData,C=T===void 0?u:T,x=[[m,"getList"],[m,"getMany"],[m,"getManyReference"]],h.current=x.reduce(function(L,M){return L.concat(i.getQueriesData(M))},[]),[4,Promise.all(h.current.map(function(L){var M=L[0];return i.cancelQueries(M)}))]);case 1:return R.sent(),p({resource:m,id:E}),P&&setTimeout(function(){return P(C,Q({resource:m},y),{snapshot:h.current})},0),o.onSuccess&&setTimeout(function(){return o.onSuccess(C,Q({resource:m},y),{snapshot:h.current})},0),l.current==="optimistic"?[2,S.mutate(Q({resource:m},y),{onSettled:b,onError:v})]:(mt.once("end",function(L){var M=L.isUndo;M?h.current.forEach(function(A){var I=A[0],D=A[1];i.setQueryData(I,D)}):S.mutate(Q({resource:m},y),{onSettled:b,onError:v})}),[2])}})})};return[_,S]},H=globalThis&&globalThis.__assign||function(){return H=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},H.apply(this,arguments)},tr=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},rr=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Pi=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Ze=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},qu=function(e,r,t){r===void 0&&(r={}),t===void 0&&(t={});var n=ye(),i=X(),a=r.ids,u=t.mutationMode,c=u===void 0?"pessimistic":u,f=Pi(t,["mutationMode"]),o=s.useRef(c),l=s.useRef({}),d=s.useRef([]),h=function(_){var m=_.resource,y=_.ids,g=Date.now(),w=o.current==="undoable"?g+5*1e3:g,P=function(b){if(b){var v=Ze([],b,!0);return y.forEach(function(O){var E=v.findIndex(function(T){return T.id==O});E!==-1&&(v=Ze(Ze([],v.slice(0,E),!0),v.slice(E+1),!0))}),v}};i.setQueriesData([m,"getList"],function(b){if(!b||!b.data)return b;var v=P(b.data),O=v.length<b.data.length;return O?{data:v,total:b.total?b.total-(b.data.length-v.length):void 0,pageInfo:b.pageInfo}:b},{updatedAt:w}),i.setQueriesData([m,"getMany"],function(b){return b&&b.length>0?P(b):b},{updatedAt:w}),i.setQueriesData([m,"getManyReference"],function(b){if(!b||!b.data)return b;var v=P(b.data),O=v.length<b.data.length;return O?{data:v,total:b.total-(b.data.length-v.length)}:b},{updatedAt:w})},p=Ve(function(_){var m=_===void 0?{}:_,y=m.resource,g=y===void 0?e:y,w=m.ids,P=w===void 0?l.current.ids:w,b=m.meta,v=b===void 0?l.current.meta:b;return n.deleteMany(g,{ids:P,meta:v}).then(function(O){var E=O.data;return E})},H(H({},f),{onMutate:function(_){return tr(void 0,void 0,void 0,function(){var m;return rr(this,function(y){switch(y.label){case 0:return f.onMutate?[4,f.onMutate(_)]:[3,2];case 1:return m=y.sent()||{},[2,H({snapshot:d.current},m)];case 2:return[2,{snapshot:d.current}]}})})},onError:function(_,m,y){if(m===void 0&&(m={}),(o.current==="optimistic"||o.current==="undoable")&&y.snapshot.forEach(function(g){var w=g[0],P=g[1];i.setQueryData(w,P)}),f.onError)return f.onError(_,m,y)},onSuccess:function(_,m,y){if(m===void 0&&(m={}),o.current==="pessimistic"){var g=m.resource,w=g===void 0?e:g,P=m.ids,b=P===void 0?a:P;h({resource:w,ids:b}),f.onSuccess&&f.onSuccess(_,m,y)}},onSettled:function(_,m,y,g){if(y===void 0&&(y={}),(o.current==="optimistic"||o.current==="undoable")&&g.snapshot.forEach(function(w){var P=w[0];i.invalidateQueries(P)}),f.onSettled)return f.onSettled(_,m,y,g)}})),S=function(_,m,y){return _===void 0&&(_=e),m===void 0&&(m={}),y===void 0&&(y={}),tr(void 0,void 0,void 0,function(){var g,w,P,b,v,O,E;return rr(this,function(T){switch(T.label){case 0:return g=y.mutationMode,w=y.onSuccess,P=y.onSettled,b=y.onError,l.current=r,g&&(o.current=g),o.current==="pessimistic"?[2,p.mutate(H({resource:_},m),{onSuccess:w,onSettled:P,onError:b})]:(v=m.ids,O=v===void 0?a:v,E=[[_,"getList"],[_,"getMany"],[_,"getManyReference"]],d.current=E.reduce(function(C,x){return C.concat(i.getQueriesData(x))},[]),[4,Promise.all(d.current.map(function(C){var x=C[0];return i.cancelQueries(x)}))]);case 1:return T.sent(),h({resource:_,ids:O}),w&&setTimeout(function(){return w(O,H({resource:_},m),{snapshot:d.current})},0),f.onSuccess&&setTimeout(function(){return f.onSuccess(O,H({resource:_},m),{snapshot:d.current})},0),o.current==="optimistic"?[2,p.mutate(H({resource:_},m),{onSettled:P,onError:b})]:(mt.once("end",function(C){var x=C.isUndo;x?d.current.forEach(function(R){var L=R[0],M=R[1];i.setQueryData(L,M)}):p.mutate(H({resource:_},m),{onSettled:P,onError:b})}),[2])}})})};return[S,p]},Ur=s.createContext(void 0),Oi=function(e){var r=e.children,t=s.useState(!1),n=t[0],i=t[1],a=s.useState(null),u=a[0],c=a[1],f=s.useState(),o=f[0],l=f[1],d=s.useState(null),h=d[0],p=d[1],S=s.useState(null),_=S[0],m=S[1],y=s.useState(),g=y[0],w=y[1],P=s.useCallback(function(){return i(!0)},[]),b=s.useCallback(function(){i(!1),c(null)},[]),v=s.useCallback(function(E,T){m(E),w(T)},[]),O=s.useMemo(function(){return{editor:u,setEditor:c,preferenceKey:o,setPreferenceKey:l,title:_,titleOptions:g,setTitle:v,isEnabled:n,disable:b,enable:P,path:h,setPath:p}},[b,P,u,o,n,h,p,_,g,v]);return s.createElement(Ur.Provider,{value:O},r)},De=globalThis&&globalThis.__assign||function(){return De=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},De.apply(this,arguments)},Si=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},qr=s.createContext({definitions:{},register:function(){},unregister:function(){}}),Ci=function(e){var r=e.definitions,t=r===void 0?{}:r,n=e.children,i=s.useState(t),a=i[0],u=i[1],c=s.useCallback(function(l){u(function(d){var h;return dr(d[l.name],l)?d:De(De({},d),(h={},h[l.name]=l,h))})},[]),f=s.useCallback(function(l){u(function(d){var h=d,p=l.name;h[p];var S=Si(h,[typeof p=="symbol"?p:p+""]);return S})},[]),o=s.useMemo(function(){return{definitions:a,register:c,unregister:f}},[a]);return s.createElement(qr.Provider,{value:o},n)},xi=function(e){var r=e.authProvider,t=e.basename,n=e.dataProvider,i=e.i18nProvider,a=e.store,u=e.children,c=e.history,f=e.queryClient;if(!n)throw new Error(`Missing dataProvider prop.
React-admin requires a valid dataProvider function to work.`);var o=s.useMemo(function(){return f||new cn},[f]),l=s.useMemo(function(){return r instanceof Function?yo(r):r},[r]),d=s.useMemo(function(){return n instanceof Function?sa(n):n},[n]);return s.createElement(yr.Provider,{value:l},s.createElement(Or.Provider,{value:d},s.createElement(kn,{value:a},s.createElement(Oi,null,s.createElement(fn,{client:o},s.createElement(Hn,{history:c,basename:t},s.createElement(Wn,{value:i},s.createElement(Dn,null,s.createElement(Ci,null,u)))))))))};xi.defaultProps={dataProvider:Sr,store:mr()};var Gr=function(){return s.useContext(qr)},it=globalThis&&globalThis.__assign||function(){return it=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},it.apply(this,arguments)},nr=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},ar=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Ti=function(e){var r=en(),t=r.permissions,n=r.isLoading,i=Mi(e,t,n),a=i[0],u=i[1];return Ai(a.resources,t),{customRoutesWithLayout:a.customRoutesWithLayout,customRoutesWithoutLayout:a.customRoutesWithoutLayout,status:u,resources:a.resources}},Mi=function(e,r,t){var n=Me(),i=Ri(pe(e)),a=i[0],u=i[1],c=i[2],f=Dr(function(){return Li(it({children:e},a))}),o=f[0],l=f[1];return s.useEffect(function(){var d=function(p){return nr(void 0,void 0,void 0,function(){var S;return ar(this,function(_){try{S=p(r),S!=null&&S.then?S.then(function(m){c(pe(m)),l("ready")}):(c(pe(S)),l("ready"))}catch(m){console.error(m),n()}return[2]})})},h=function(){return nr(void 0,void 0,void 0,function(){var p,S;return ar(this,function(_){return p=Qr(e),S=pe(e),u(S),l(p?"loading":S.resources.length>0||S.customRoutesWithLayout.length>0||S.customRoutesWithoutLayout.length>0?"ready":"empty"),p&&d(p),[2]})})};t||h()},[e,n,t,c,r,u,l]),[a,o]},Ri=function(e){var r=s.useState(e),t=r[0],n=r[1],i=s.useCallback(function(a){n(function(u){return{customRoutesWithLayout:u.customRoutesWithLayout.concat(a.customRoutesWithLayout),customRoutesWithoutLayout:u.customRoutesWithoutLayout.concat(a.customRoutesWithoutLayout),resources:u.resources.concat(a.resources)}})},[]);return[t,n,i]},Ai=function(e,r){var t=Gr(),n=t.register,i=t.unregister;s.useEffect(function(){return e.forEach(function(a){if(typeof a.type.registerResource=="function"){var u=a.type.registerResource(a.props,r);n(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")}),function(){e.forEach(function(a){if(typeof a.type.registerResource=="function"){var u=a.type.registerResource(a.props,r);i(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")})}},[r,n,e,i])},Li=function(e){var r=e.children,t=e.resources,n=e.customRoutesWithLayout,i=e.customRoutesWithoutLayout;return Qr(r)?"loading":t.length>0||n.length>0||i.length>0?"ready":"empty"},Qr=function(e){var r=Array.isArray(e)?e:[e],t=r.filter(function(n){return typeof n=="function"});if(t.length>1)throw new Error("You can only provide one function child to AdminRouter");return t.length===0?null:t[0]},pe=function(e){var r=[],t=[],n=[];return s.Children.forEach(e,function(i){if(s.isValidElement(i)){if(i.type===s.Fragment){var a=pe(i.props.children);r.push.apply(r,a.customRoutesWithLayout),t.push.apply(t,a.customRoutesWithoutLayout),n.push.apply(n,a.resources)}if(i.type.raName==="CustomRoutes"){var u=i;u.props.noLayout?t.push(u.props.children):r.push(u.props.children)}else i.type.raName==="Resource"&&n.push(i)}}),{customRoutesWithLayout:r,customRoutesWithoutLayout:t,resources:n}},Hr=function(e){var r=Xa(1e3);Bn();var t=Er(),n=Ti(e.children),i=n.customRoutesWithLayout,a=n.customRoutesWithoutLayout,u=n.status,c=n.resources,f=e.layout,o=e.catchAll,l=e.dashboard,d=e.loading,h=e.menu,p=e.requireAuth,S=e.ready,_=e.title,m=s.useState(!p),y=m[0],g=m[1],w=mo();return s.useEffect(function(){p&&w().then(function(){g(!0)}).catch(function(){})},[w,p]),u==="empty"?s.createElement(S,null):u==="loading"||!y?s.createElement(we,null,a,r?s.createElement(G,{path:"*",element:s.createElement(d,null)}):s.createElement(G,{path:"*",element:null})):s.createElement(we,null,a,s.createElement(G,{path:"/*",element:s.createElement("div",null,s.createElement(f,{dashboard:l,menu:h,title:_},s.createElement(we,null,i,s.Children.map(c,function(P){return s.createElement(G,{key:P.props.name,path:"".concat(P.props.name,"/*"),element:P})}),s.createElement(G,{path:"/",element:l?s.createElement(lo,{authParams:Fi,component:l}):c.length>0?s.createElement(gn,{to:t({resource:c[0].props.name,type:"list"})}):null}),s.createElement(G,{path:"*",element:s.createElement(o,{title:_})}))))}))};Hr.defaultProps={customRoutes:[]};var Fi={params:{route:"dashboard"}},ki=function(e){var r=e.children;return s.createElement(s.Fragment,null,r)},Gu=function(e){var r=e.catchAll,t=r===void 0?or:r,n=e.children,i=e.dashboard,a=e.disableTelemetry,u=a===void 0?!1:a,c=e.layout,f=c===void 0?ki:c,o=e.loading,l=o===void 0?or:o,d=e.loginPage,h=d===void 0?!1:d,p=e.authCallbackPage,S=p===void 0?!1:p,_=e.menu,m=e.ready,y=m===void 0?Wi:m,g=e.title,w=g===void 0?"React Admin":g,P=e.requireAuth,b=P===void 0?!1:P;return s.useEffect(function(){if(!(u||typeof window>"u"||typeof window.location>"u"||typeof Image>"u")){var v=new Image;v.src="https://react-admin-telemetry.marmelab.com/react-admin-telemetry?domain=".concat(window.location.hostname)}},[u]),s.createElement(we,null,h!==!1&&h!==!0?s.createElement(G,{path:"/login",element:ir(h)}):null,S!==!1&&S!==!0?s.createElement(G,{path:"/auth-callback",element:ir(S)}):null,s.createElement(G,{path:"/*",element:s.createElement(Hr,{catchAll:t,dashboard:i,layout:f,loading:l,menu:_,requireAuth:b,ready:y,title:w},n)}))},ir=function(e){return s.isValidElement(e)?e:s.createElement(e)},or=function(){return null},Kr=s.createContext(void 0),Qe=function(e){var r=e.children,t=e.value;return t?s.createElement(Kr.Provider,{value:t},r):r},zr=function(e){var r=e.create,t=e.edit,n=e.list,i=e.name,a=e.show;return s.createElement(Qe,{value:i},s.createElement(we,null,r&&s.createElement(G,{path:"create/*",element:s.isValidElement(r)?r:s.createElement(r,null)}),a&&s.createElement(G,{path:":id/show/*",element:s.isValidElement(a)?a:s.createElement(a,null)}),t&&s.createElement(G,{path:":id/*",element:s.isValidElement(t)?t:s.createElement(t,null)}),n&&s.createElement(G,{path:"/*",element:s.isValidElement(n)?n:s.createElement(n,null)}),e.children))};zr.raName="Resource";zr.registerResource=function(e){var r=e.create,t=e.edit,n=e.icon,i=e.list,a=e.name,u=e.options,c=e.show,f=e.recordRepresentation;return{name:a,options:u,hasList:!!i,hasCreate:!!r,hasEdit:!!t,hasShow:!!c,icon:n,recordRepresentation:f}};var Br=function(){return Gr().definitions},Ot=function(){var e=re(),r=Br();return function(t,n){n===void 0&&(n=2);var i=r[t],a=e("resources.".concat(t,".name"),{smart_count:n,_:i&&i.options&&i.options.label?e(i.options.label,{smart_count:n,_:i.options.label}):Fe.humanize(n>1?Fe.pluralize(t):Fe.singularize(t))});return a}},te=function(e){var r=s.useContext(Kr);return e&&e.resource||r},Jr=function(e){var r=te(e),t=Br(),n=e||{},i=n.hasCreate,a=n.hasEdit,u=n.hasList,c=n.hasShow,f=n.recordRepresentation,o=s.useMemo(function(){return Ce({},{hasCreate:i,hasEdit:a,hasList:u,hasShow:c,recordRepresentation:f},t[r])},[r,t,i,a,u,c,f]);return o},ji=function(e){var r=Jr({resource:e}).recordRepresentation;return s.useCallback(function(t){return t?typeof r=="function"?r(t):typeof r=="string"?oe(t,r):s.isValidElement(r)?r:"#".concat(t.id):""},[r])},re=function(){var e=yt(),r=s.useCallback(function(t,n){return e.translate(t,n)},[e]);return e?r:Ii},Ii=function(e){return e},Di=function(){var e=re(),r=Xr(),t=te();return s.useCallback(function(n){var i=n.source,a=n.label,u=n.resource;return a===!1||a===""?null:a&&typeof a!="string"?a:e.apply(void 0,$i({label:a,prefix:r,resource:u,resourceFromContext:t,source:i}))},[r,t,e])},Yr=function(e){var r=e.source,t=e.label,n=e.resource,i=e.isRequired,a=Di();if(t===!0)throw new Error("Label parameter must be a string, a ReactElement or false");return t===!1||t===""?null:t&&typeof t!="string"?t:s.createElement("span",null,a({label:t,resource:n,source:r}),i&&s.createElement("span",{"aria-hidden":"true"}," *"))};Yr.displayName="FieldTitle";const Qu=s.memo(Yr),$i=function(e){if(!e)return[""];var r=e.label,t=e.prefix,n=e.resource,i=e.resourceFromContext,a=e.source;if(typeof r<"u")return[r,{_:r}];if(typeof a>"u")return[""];var u=Ni(a),c=u.sourceWithoutDigits,f=u.sourceSuffix,o=Fe.transform(f.replace(/\./g," "),["underscore","humanize"]);return n?["resources.".concat(n,".fields.").concat(c),{_:o}]:t?["".concat(t,".").concat(c),{_:o}]:["resources.".concat(i,".fields.").concat(c),{_:o}]};var Ni=function(e){var r=e.replace(/\.\d+\./g,"."),t=e.split("."),n;t.forEach(function(a,u){Vi(a)&&(n=u)});var i=n!=null?t.slice(n+1).join("."):e;return{sourceWithoutDigits:r,sourceSuffix:i}},Vi=function(e){for(var r=e.length-1;r>=0;r--){var t=e.charCodeAt(r);if(t<48||t>57)return!1}return!0};const Hu=function(e,r,t){if(e[r]&&!_n.isValidElementType(e[r]))return new Error("Invalid prop '".concat(r,"' supplied to '").concat(t,"': the prop is not a valid React component"))};var ur=globalThis&&globalThis.__assign||function(){return ur=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ur.apply(this,arguments)};const Wi=function(){return s.createElement("span",null)},Ui=function(e,r){};var qi=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Gi=typeof window<"u"?s.useLayoutEffect:s.useEffect,Qi=function(e,r){var t=s.useRef(function(){throw new Error("Cannot call an event handler while rendering.")});return Gi(function(){t.current=e},qi([e],r,!0)),s.useCallback(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.current.apply(t,n)},[])},Zr=s.createContext(""),Xr=function(){return s.useContext(Zr)},Hi=function(e){var r=e.prefix,t=e.concatenate,n=t===void 0?!0:t,i=e.children,a=Xr(),u=a&&n?"".concat(a,".").concat(r):r;return s.createElement(Zr.Provider,{value:u},i)},se=function(e,r){var t=Ue(),n=t.getItem,i=t.setItem,a=t.subscribe,u=s.useState(function(){return n(e,r)}),c=u[0],f=u[1];s.useEffect(function(){var l=n(e,r);dr(c,l)||f(l);var d=a(e,function(h){f(typeof h>"u"?r:h)});return function(){return d()}},[e,a,r,n,c]);var o=Qi(function(l,d){var h=typeof l=="function"?l(c):l;i(e,typeof h>"u"?typeof d>"u"?r:d:h)},[e,i,r,c]);return[c,o]},Ki=function(e){var r=Ue().removeItem;return s.useCallback(function(t){if(typeof t>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return r(t??e)},[r,e])},Ku=function(e){var r=Ue().removeItems;return s.useCallback(function(t){if(typeof t>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return r(t??e)},[r,e])},zi=function(){var e=Ue().reset;return e},Bi=function(){var e=ee(),r=X(),t=zi(),n=xe(),i=s.useRef(n),a=le(),u=s.useRef(a),c=ge(),f=K("".concat(c,"/").concat(We.loginUrl));s.useEffect(function(){u.current=a,i.current=n},[a,n]);var o=s.useCallback(function(d,h,p){return d===void 0&&(d={}),h===void 0&&(h=f),p===void 0&&(p=!0),e.logout(d).then(function(S){if(S===!1||h===!1){t(),r.clear();return}var _=S||h;if(_!=null&&_.startsWith("http"))return t(),r.clear(),window.location.href=_,_;var m=_.split("?"),y={pathname:m[0]},g={};return p&&u.current&&u.current.pathname&&(g={state:{nextPathname:u.current.pathname,nextSearch:u.current.search}}),m[1]&&(y.search=m[1]),i.current(y,g),t(),r.clear(),S})},[e,t,f,r]),l=s.useCallback(function(d){return n({pathname:f},{state:{nextPathname:a&&a.pathname}}),t(),r.clear(),Promise.resolve()},[t,a,n,f,r]);return e?o:l};const Me=Bi;var ot=globalThis&&globalThis.__assign||function(){return ot=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ot.apply(this,arguments)},Ji={},Yi=function(e,r,t){e===void 0&&(e=Ji),r===void 0&&(r=!1);var n=ee(),i=Me(),a=ge(),u=z(),c=he(["auth","checkAuth",e],function(){return n==null?void 0:n.checkAuth(e).then(function(){return!0})},ot({onError:function(f){var o=K("".concat(a,"/").concat(We.loginUrl));if(r){i({},f&&f.redirectTo!=null?f.redirectTo:o);var l=f&&f.message===!1;!l&&u(Xi(f,"ra.auth.auth_check_error"),{type:"error"})}},retry:!1},t));return s.useMemo(function(){var f;return{authenticated:((f=c.data)!==null&&f!==void 0?f:c.isLoading)?!0:n==null,isLoading:c.isLoading,error:c.error}},[n,c])};const Zi=Yi;var Xi=function(e,r){return typeof e=="string"?e:typeof e>"u"||!e.message?r:e.message},eo=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},to=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ro={},no=function(e,r){e===void 0&&(e=ro),r===void 0&&(r={staleTime:5*60*1e3});var t=ee(),n=he(["auth","getPermissions",e],t?function(){return t.getPermissions(e)}:function(){return eo(void 0,void 0,void 0,function(){return to(this,function(i){return[2,[]]})})},r);return s.useMemo(function(){return{permissions:n.data,isLoading:n.isLoading,error:n.error}},[n])};const en=no;var ao=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},He=function(e){e===void 0&&(e={});var r=e.params,t=ao(e,["params"]);Zi(r??io,!0,t)},io={},Pe=globalThis&&globalThis.__assign||function(){return Pe=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Pe.apply(this,arguments)},oo=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},lr=function(e){return s.Children.count(e)===0},uo=function(e){var r=e.authParams,t=e.children,n=e.render,i=e.component;e.staticContext;var a=oo(e,["authParams","children","render","component","staticContext"]);Ui(n&&t&&!lr(t)||n&&i||i&&t&&!lr(t),"You should only use one of the `component`, `render` and `children` props in <WithPermissions>"),He(r);var u=en(r).permissions;if(i)return s.createElement(i,Pe({permissions:u},a));if(n)return n(Pe({permissions:u},a));if(t)return t(Pe({permissions:u},a))};const lo=uo;var so=function(){var e=ee(),r=le(),t=r.state,n=xe(),i=ge(),a=Nn().resetNotifications,u=t&&t.nextPathname,c=t&&t.nextSearch,f=K("".concat(i,"/").concat(We.afterLoginUrl)),o=s.useCallback(function(d,h){return d===void 0&&(d={}),e.login(d).then(function(p){if(a(),p&&p.hasOwnProperty("redirectTo"))p&&n(p.redirectTo);else{var S=h||u+c||f;n(S)}return p})},[e,n,u,c,a,f]),l=s.useCallback(function(d,h){return a(),n(f),Promise.resolve()},[n,a,f]);return e?o:l};const zu=so;var co="AUTH_LOGIN",fo="AUTH_CHECK",vo="AUTH_ERROR",ho="AUTH_LOGOUT",go="AUTH_GET_PERMISSIONS";const yo=function(e){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(null,t)};return r.login=function(t){return e(co,t)},r.logout=function(t){return e(ho,t)},r.checkAuth=function(t){return e(fo,t)},r.checkError=function(t){return e(vo,t)},r.getPermissions=function(t){return e(go,t)},r};var mo=function(){var e=ee(),r=z(),t=Me(),n=ge(),i=K("".concat(n,"/").concat(We.loginUrl)),a=s.useCallback(function(u,c,f,o){return u===void 0&&(u={}),c===void 0&&(c=!0),f===void 0&&(f=i),o===void 0&&(o=!1),e.checkAuth(u).catch(function(l){if(c){t({},l&&l.redirectTo!=null?l.redirectTo:f);var d=o||l&&l.message===!1;!d&&r(po(l,"ra.auth.auth_check_error"),{type:"error"})}throw l})},[e,t,r,i]);return e?a:bo},bo=function(){return Promise.resolve()},po=function(e,r){return typeof e=="string"?e:typeof e>"u"||!e.message?r:e.message},ut=globalThis&&globalThis.__assign||function(){return ut=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ut.apply(this,arguments)},wo=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},_o=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Eo={id:"",fullName:null},Po={staleTime:5*60*1e3},Bu=function(e){e===void 0&&(e=Po);var r=ee(),t=he(["auth","getIdentity"],r?function(){return r.getIdentity()}:function(){return wo(void 0,void 0,void 0,function(){return _o(this,function(n){return[2,Eo]})})},ut({enabled:typeof(r==null?void 0:r.getIdentity)=="function"},e));return s.useMemo(function(){return t.isLoading?{isLoading:!0}:t.error?{error:t.error,isLoading:!1}:{data:t.data,identity:t.data,refetch:t.refetch,isLoading:!1}},[t])},lt=globalThis&&globalThis.__assign||function(){return lt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},lt.apply(this,arguments)},Ju=function(e){var r=ee(),t=Te(),n=Me(),i=le(),a=i.state,u=a&&a.nextPathname,c=a&&a.nextSearch,f=u?u+c:"/";return he(["auth","handleCallback"],function(){return r.handleCallback()},lt({retry:!1,onSuccess:function(o){var l,d=localStorage.getItem(Oo),h=(l=o==null?void 0:o.redirectTo)!==null&&l!==void 0?l:d;h!==!1&&t(h??f)},onError:function(o){var l=o??{},d=l.redirectTo,h=d===void 0?!1:d,p=l.logoutOnFailure,S=p===void 0?!0:p;S&&n({},h),h!==!1&&t(h)}},e))},Oo="@react-admin/nextPathname",tn=s.createContext(""),Yu=function(e){var r=e.value,t=r===void 0?"":r,n=e.children;return s.createElement(tn.Provider,{value:t},n)},So=function(){return s.useContext(tn)},Co=function(e,r){var t=So();return se(t&&e?"".concat(t,".").concat(e):t??e,r)},xo=function(){return s.useContext(Ur)},To=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},Zu=function(e,r){var t=Co(e,r),n=t[0],i=t[1],a=s.useState(n),u=a[0],c=a[1];s.useEffect(function(){c(n||r)},[n,r]);var f=function(d){c(d.target.value===""?r:d.target.value)},o=function(){i(u)},l=function(d){var h;if(d.key==="Enter"){i(u);var p=d.target.form;if(p){var S=To([],p,!0).indexOf(d.target);(h=p.elements[S+1])===null||h===void 0||h.focus()}d.preventDefault()}};return{value:u,onChange:f,onBlur:o,onKeyDown:l}},Xu=function(e,r){var t=xo().setTitle;s.useEffect(function(){t(e,r)},[e,JSON.stringify(r),t])},Se=globalThis&&globalThis.__assign||function(){return Se=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Se.apply(this,arguments)},Mo=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},Ro=function(e){var r=ht().getValues,t=En();return Object.keys(t).length===0&&(t=r()),s.createElement(Ao,Se({formData:t},e))},Ao=function(e){var r=e.children;e.form;var t=e.formData,n=e.source,i=e.index,a=Mo(e,["children","form","formData","source","index"]),u;if(typeof i<"u"&&n){var c=oe(t,n),f=function(o){return"".concat(n,".").concat(o)};u=r(Se({formData:t,scopedFormData:c,getSource:f},a))}else u=r(Se({formData:t},a));return u===void 0?null:u};const el=Ro;var rn=s.createContext(void 0),st=globalThis&&globalThis.__assign||function(){return st=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},st.apply(this,arguments)},Lo=function(e){var r=e.error,t=re();if(r.message){var n=r,i=n.message,a=n.args;return s.createElement(s.Fragment,null,t(i,st({_:i},a)))}return s.createElement(s.Fragment,null,t(r,{_:r}))};const tl=Lo;var Y=globalThis&&globalThis.__assign||function(){return Y=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Y.apply(this,arguments)},Fo=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},ko=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},jo=function(e){return function(r){return Fo(void 0,void 0,void 0,function(){var t,n;return ko(this,function(i){switch(i.label){case 0:return[4,e(r)];case 1:return t=i.sent(),!t||$e(t)?[2,{values:r,errors:{}}]:(n=ct(t),!n||$e(n)?[2,{values:r,errors:{}}]:[2,{values:{},errors:n}])}})})}},ct=function(e){return Object.keys(e).reduce(function(r,t){var n,i,a;if(Array.isArray(e[t])){var u=!1,c=e[t].map(function(f){return $e(f)||(u=!0),ct(f)});return u?Y(Y({},r),(n={},n[t]=c,n)):r}return $e(e[t])?r:typeof e[t]=="object"&&!Do(e[t])?Y(Y({},r),(i={},i[t]=ct(e[t]),i)):Y(Y({},r),(a={},a[t]=Io(e[t]),a))},{})},Io=function(e){return{type:"manual",message:e}},Do=function(e){return Object.keys(e).includes("message")&&Object.keys(e).includes("args")},$e=function(e){return Object.getOwnPropertyNames(e).length===0},sr=globalThis&&globalThis.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))},$o=function(e){var r=e.children,t=s.useRef({}),n=s.useRef({}),i=s.useMemo(function(){return{subscribe:function(a,u){return n.current[a]||(n.current[a]=[]),n.current[a].push(u),function(){n.current[a]=n.current[a].filter(function(c){return c!==u})}},getGroupFields:function(a){return t.current[a]||[]},registerGroup:function(a){t.current[a]=t.current[a]||[]},unregisterGroup:function(a){delete t[a]},registerField:function(a,u){u!=null&&((t.current[u]||[]).includes(a)||(t.current[u]=sr(sr([],t.current[u]||[],!0),[a],!1),n.current[u]&&n.current[u].forEach(function(c){return c()})))},unregisterField:function(a,u){if(u!=null)if(!t.current[u])console.warn("Invalid form group ".concat(u));else{var c=new Set(t.current[u]);c.delete(a),t.current[u]=Array.from(c),n.current[u]&&n.current[u].forEach(function(f){return f()})}}}},[]);return s.createElement(rn.Provider,{value:i},r)};function cr(e,r){var t=sn({},No(e,r),r);return t}function No(e,r){return typeof e=="object"?e:typeof e=="function"?e(r):{}}var Vo=function(e,r){var t=function(n,i){Object.entries(n).forEach(function(a){var u=a[0],c=a[1];if(typeof c=="object"){t(c,"".concat(i).concat(u,"."));return}r("".concat(i).concat(u),{type:"server",message:c.toString()})})};t(e,"")},Wo=function(e){var r=hr(e?{control:e}:void 0),t=r.submitCount,n=r.errors,i=s.useRef(t),a=z();s.useEffect(function(){t>i.current&&(i.current=t,Object.keys(n).length>0&&a("ra.message.invalid_form",{type:"error"}))},[n,t,a])},Uo=function(e,r,t){var n=s.useContext(yn).navigator,i=le(),a=re(),u=hr(t?{control:t}:void 0),c=u.isSubmitSuccessful,f=u.isSubmitting,o=u.dirtyFields,l=Object.keys(o).length>0,d=s.useRef(r||i.pathname);s.useEffect(function(){if(!(!e||!l)&&n.block){var h=n.block(function(p){var S=p.location.pathname.startsWith(d.current),_=p.location.pathname.startsWith("".concat(d.current,"/show")),m=S&&!_;!f&&(m||c||window.confirm(a("ra.message.unsaved_changes")))&&(h(),p.retry())});return h}},[e,i,n,l,f,c,a])},qo=function(e,r){r===void 0&&(r={});var t={};return Object.keys(e).forEach(function(n){e[n]==null||e[n]===""?r.hasOwnProperty(n)&&(t[n]=null):t[n]=e[n]}),t},Go=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},Qo=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Ho=function(e){var r=e.context,t=e.criteriaMode,n=t===void 0?"firstError":t,i=e.defaultValues,a=e.delayError,u=e.formRootPathname,c=e.mode,f=e.resolver,o=e.reValidateMode,l=o===void 0?"onChange":o,d=e.onSubmit,h=e.sanitizeEmptyValues,p=e.shouldFocusError,S=e.shouldUnregister,_=e.shouldUseNativeValidation,m=e.warnWhenUnsavedChanges,y=e.validate,g=Ge(e),w=Ma(),P=s.useMemo(function(){return cr(i,g)},[JSON.stringify({defaultValues:typeof i=="function"?"function":i,record:g})]),b=f||(y?jo(y):void 0),v=Pn({context:r,criteriaMode:n,defaultValues:P,delayError:a,mode:c,reValidateMode:l,resolver:b,shouldFocusError:p,shouldUnregister:S,shouldUseNativeValidation:_}),O=s.useRef(v),E=v.formState;E.isSubmitting,E.isDirty,E.isValid,E.isValidating,E.dirtyFields,E.errors,E.submitCount,E.touchedFields,E.isSubmitted,E.isSubmitSuccessful,s.useEffect(function(){if(g){var x=cr(i,g);v.reset(x)}},[JSON.stringify({defaultValues:typeof i=="function"?"function":i,record:g})]),Wo(v.control),Uo(Boolean(m),u,v.control);var T=s.useCallback(function(x,R){return Go(void 0,void 0,void 0,function(){var L,M;return Qo(this,function(A){switch(A.label){case 0:return M=h?qo(x,g):x,d?[4,d(M,R)]:[3,2];case 1:L=A.sent(),A.label=2;case 2:return d==null&&(w!=null&&w.save)?[4,w.save(M,R)]:[3,4];case 3:L=A.sent(),A.label=4;case 4:return L!=null&&Vo(L,O.current.setError),[2]}})})},[d,w,h,g]),C=s.useCallback(function(x){x.defaultPrevented||(x.stopPropagation(),v.handleSubmit(T)(x))},[v,T]);return{form:v,handleSubmit:T,formHandleSubmit:C}},ft=globalThis&&globalThis.__assign||function(){return ft=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ft.apply(this,arguments)},rl=function(e){var r=e.children,t=e.id,n=e.className,i=e.noValidate,a=i===void 0?!1:i,u=Ge(e),c=te(e),f=Ho(e),o=f.form,l=f.formHandleSubmit;return s.createElement(qa,{value:u},s.createElement(Hi,{prefix:"resources.".concat(c,".fields")},s.createElement(On,ft({},o),s.createElement($o,null,s.createElement("form",{onSubmit:l,noValidate:a,id:t,className:n},r)))))},Ko=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ne=function(e){return typeof e>"u"||e===null||e===""||Array.isArray(e)&&e.length===0};function zo(e){return e?e.hasOwnProperty("message"):!1}var ae=function(e,r,t,n){return typeof e=="function"?e({args:r,value:t,values:n}):r?{message:e,args:r}:e},ie=function(e){return vr(e,function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return JSON.stringify(r)})},nn=function(e){return typeof e=="function"},Bo=function(e,r){return function(t,n,i){var a=e(t,n,i);return a?typeof a=="string"||zo(a)?a:a.then(function(u){return u||r(t,n,i)}):r(t,n,i)}},Jo=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=(Array.isArray(e[0])?e[0]:e).filter(nn);return t.reduce(Bo,function(){return null})},nl=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t,n,i){for(var a=(Array.isArray(e[0])?e[0]:e).filter(nn),u=0,c=a;u<c.length;u++){var f=c[u],o=f(t,n,i);if(o)return o}}},al=ie(function(e){return e===void 0&&(e="ra.validation.required"),Object.assign(function(r,t){return ne(r)?ae(e,void 0,r,t):void 0},{isRequired:!0})});ie(function(e,r){return r===void 0&&(r="ra.validation.minLength"),function(t,n){return!ne(t)&&t.length<e?ae(r,{min:e},t,n):void 0}});ie(function(e,r){return r===void 0&&(r="ra.validation.maxLength"),function(t,n){return!ne(t)&&t.length>e?ae(r,{max:e},t,n):void 0}});ie(function(e,r){return r===void 0&&(r="ra.validation.minValue"),function(t,n){return!ne(t)&&t<e?ae(r,{min:e},t,n):void 0}});ie(function(e,r){return r===void 0&&(r="ra.validation.maxValue"),function(t,n){return!ne(t)&&t>e?ae(r,{max:e},t,n):void 0}});ie(function(e){return e===void 0&&(e="ra.validation.number"),function(r,t){return!ne(r)&&isNaN(Number(r))?ae(e,void 0,r,t):void 0}});var Yo=vr(function(e,r){return r===void 0&&(r="ra.validation.regex"),function(t,n){return!ne(t)&&typeof t=="string"&&!e.test(t)?ae(r,{pattern:e},t,n):void 0}},function(e,r){return e.toString()+r});ie(function(e){return e===void 0&&(e="ra.validation.email"),Yo(Ko,e)});var Zo=function(e){var r=e.args;return{message:"ra.validation.oneOf",args:r}};ie(function(e,r){return r===void 0&&(r=Zo),function(t,n){return!ne(t)&&e.indexOf(t)===-1?ae(r,{list:e},t,n):void 0}});var il=function(e){return e&&e.isRequired?!0:Array.isArray(e)?!!e.find(function(r){return r.isRequired}):!1},Xo=s.createContext(void 0),eu=function(){var e=s.useContext(rn);return e},tu=function(e){var r=e.defaultValue,t=e.source,n=Ge(e),i=ht(),a=i.getValues,u=i.resetField,c=i.getFieldState,f=i.formState,o=oe(n,t),l=oe(a(),t),d=c(t,f).isDirty;s.useEffect(function(){if(r!=null&&l==null&&o==null&&!d){var h=t.split(".").some(function(_){return ru.test(_)});if(h){var p=t.split(".").slice(0,-1).join("."),S=oe(a(),p);if(S==null)return}u(t,{defaultValue:r})}})},ru=/^\d+$/,nu=function(){var e=s.useContext(Xo);return e},dt=globalThis&&globalThis.__assign||function(){return dt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},dt.apply(this,arguments)},au=function(){var e=re();return function(r){if(r.message!=null){var t=r,n=t.message,i=t.args;return e(n,dt({_:n},i))}return e(r,{_:r})}},iu=function(e){return e&&e.isRequired?!0:Array.isArray(e)?e.some(function(r){return r.isRequired}):!1};const ou=iu;var Oe=globalThis&&globalThis.__assign||function(){return Oe=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Oe.apply(this,arguments)},uu=globalThis&&globalThis.__awaiter||function(e,r,t,n){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(l){try{o(n.next(l))}catch(d){u(d)}}function f(l){try{o(n.throw(l))}catch(d){u(d)}}function o(l){l.done?a(l.value):i(l.value).then(c,f)}o((n=n.apply(e,r||[])).next())})},lu=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(o){return function(l){return f([o,l])}}function f(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){t.label=o[1];break}if(o[0]===6&&t.label<a[1]){t.label=a[1],a=o;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(o);break}a[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(l){o=[6,l],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},su=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t},cu=function(e){return e??""},fu=function(e){return e===""?null:e},ol=function(e){var r=e.defaultValue,t=e.format,n=t===void 0?cu:t,i=e.id,a=e.isRequired,u=e.name,c=e.onBlur,f=e.onChange,o=e.parse,l=o===void 0?fu:o,d=e.source,h=e.validate,p=su(e,["defaultValue","format","id","isRequired","name","onBlur","onChange","parse","source","validate"]),S=u||d,_=nu(),m=eu(),y=Ge(),g=au(),w=ht();s.useEffect(function(){if(!(!m||_==null))return m.registerField(d,_),function(){m.unregisterField(d,_)}},[m,_,d]);var P=Array.isArray(h)?Jo(h):h,b=Sn(Oe({name:S,defaultValue:oe(y,d,r),rules:{validate:function(C){return uu(void 0,void 0,void 0,function(){var x;return lu(this,function(R){switch(R.label){case 0:return P?[4,P(C,w.getValues(),e)]:[2,!0];case 1:return x=R.sent(),x?[2,g(x)]:[2,!0]}})})}}},p)),v=b.field,O=b.fieldState,E=b.formState;tu(e);var T=Oe(Oe({},v),{value:n?n(v.value):v.value,onBlur:function(){for(var C=[],x=0;x<arguments.length;x++)C[x]=arguments[x];c&&c.apply(void 0,C),v.onBlur()},onChange:function(){for(var C,x,R,L,M,A=[],I=0;I<arguments.length;I++)A[I]=arguments[I];f&&f.apply(void 0,A);var D=e.type==="checkbox"&&((x=(C=A[0])===null||C===void 0?void 0:C.target)===null||x===void 0?void 0:x.value)==="on"?A[0].target.checked:(M=(L=(R=A[0])===null||R===void 0?void 0:R.target)===null||L===void 0?void 0:L.value)!==null&&M!==void 0?M:A[0];v.onChange(l?l(D):D)}});return{id:i||d,field:T,fieldState:O,formState:E,isRequired:a||ou(h)}};export{Uu as $,Dr as A,z as B,Hu as C,ya as D,qu as E,Ru as F,Au as G,Ma as H,ye as I,Iu as J,qn as K,Vo as L,Ju as M,Qu as N,nu as O,Yu as P,eu as Q,nl as R,au as S,tu as T,il as U,tl as V,el as W,ol as X,Wu as Y,pt as Z,pa as _,te as a,Du as a0,Hi as a1,Vu as a2,zu as a3,al as a4,rl as a5,mo as a6,Fu as a7,Mu as a8,Lu as a9,ju as aa,Jr as ab,ku as ac,$u as ad,Gu as ae,xi as af,Ou as ag,zr as ah,Er as b,Ge as c,se as d,Tu as e,Zi as f,Me as g,Bu as h,ee as i,Cu as j,ge as k,xo as l,Xu as m,Ku as n,Co as o,Zu as p,Su as q,Br as r,Ot as s,Xa as t,re as u,He as v,Ui as w,Nn as x,mt as y,Nu as z};
