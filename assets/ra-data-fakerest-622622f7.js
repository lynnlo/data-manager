import{F as w}from"./fakerest-552f0250.js";var M=globalThis&&globalThis.__extends||function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(l[n]=i[n])},a(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(o,t);function l(){this.constructor=o}o.prototype=t===null?Object.create(t):(l.prototype=t.prototype,new l)}}(),c=globalThis&&globalThis.__assign||function(){return c=Object.assign||function(a){for(var o,t=1,l=arguments.length;t<l;t++){o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(a[i]=o[i])}return a},c.apply(this,arguments)};function R(a,o,t,l){console.group?(console.groupCollapsed(a,o,JSON.stringify(t)),console.log(l),console.groupEnd()):(console.log("FakeRest request ",a,o,t),console.log("FakeRest response",l))}const S=function(a,o){o===void 0&&(o=!1);var t=new w.Server;t.init(a),typeof window<"u"&&(window.restServer=t);function l(n,e,r){var d;switch(n){case"getList":{var g=r.pagination,u=g.page,f=g.perPage,h=r.sort,v=h.field,y=h.order,s={sort:[v,y],range:[(u-1)*f,u*f-1],filter:r.filter};return{data:t.getAll(e,s),total:t.getCount(e,{filter:r.filter})}}case"getOne":return{data:t.getOne(e,r.id,c({},r))};case"getMany":return{data:t.getAll(e,{filter:{id:r.ids}})};case"getManyReference":{var p=r.pagination,u=p.page,f=p.perPage,_=r.sort,v=_.field,y=_.order,s={sort:[v,y],range:[(u-1)*f,u*f-1],filter:c(c({},r.filter),(d={},d[r.target]=r.id,d))};return{data:t.getAll(e,s),total:t.getCount(e,{filter:s.filter})}}case"update":return{data:t.updateOne(e,r.id,c({},r.data))};case"updateMany":return r.ids.forEach(function(O){return t.updateOne(e,O,c({},r.data))}),{data:r.ids};case"create":return{data:t.addOne(e,c({},r.data))};case"delete":return{data:t.removeOne(e,r.id)};case"deleteMany":return r.ids.forEach(function(O){return t.removeOne(e,O)}),{data:r.ids};default:return!1}}var i=function(n,e,r){var d=t.getCollection(e);if(!d&&n!=="create"){var g=new P('Undefined collection "'.concat(e,'"'));return g.code=1,Promise.reject(g)}var u;try{u=l(n,e,r)}catch(f){return console.error(f),Promise.reject(f)}return o&&R(n,e,r,u),Promise.resolve(u)};return{getList:function(n,e){return i("getList",n,e)},getOne:function(n,e){return i("getOne",n,e)},getMany:function(n,e){return i("getMany",n,e)},getManyReference:function(n,e){return i("getManyReference",n,e)},update:function(n,e){return i("update",n,e)},updateMany:function(n,e){return i("updateMany",n,e)},create:function(n,e){return i("create",n,e)},delete:function(n,e){return i("delete",n,e)},deleteMany:function(n,e){return i("deleteMany",n,e)}}};var P=function(a){M(o,a);function o(){return a!==null&&a.apply(this,arguments)||this}return o}(Error);export{S as f};
